import{Q as k,s as It,r as it,x as s,aY as me,a4 as A,ay as h,W as w,X as m,aF as _e,A as re,k as T,aw as Qt,n as xe,aZ as Ie,a2 as g,ai as Dn,I as Z,as as bt,al as Ne,aA as st,v as ne,U as R,b1 as F,b3 as Pt,bn as Rn,ak as Le,bp as Qe,b6 as Ft,T as An,a1 as E,b as Ln,f as J,bq as jt,aG as Pe,V as I,D as B,aI as te,C as ue,aB as Oe,az as Ee,u as Fe,bi as Bn,bm as qn,aE as en,af as ft,B as Un,t as Gt,b9 as zn}from"./@vue.fbf6088f.js";import{i as jn}from"./is-plain-object.906d88e8.js";import{c as tn}from"./nanoevents.1080beb7.js";import{L as Te}from"./lz-string.731cedc5.js";import{Y as Gn}from"./vue-next-select.249f1cfc.js";import{D as Hn}from"./vuedraggable.7fcc5cb1.js";import{p as Wn}from"./vue-textarea-autosize.35804eaf.js";import{s as Yn,u as Zn}from"./vue-toastification.71aec175.js";import{v as Kn,n as Jn}from"./workbox-window.60401ce8.js";import"./vue.90dc2aa8.js";import"./sortablejs.79f19b9d.js";const Xn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};Xn();const Qn="modulepreload",Ht={},ea="./",mt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${ea}${a}`,a in Ht)return;Ht[a]=!0;const r=a.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${i}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":Qn,r||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),r)return new Promise((o,u)=>{l.addEventListener("load",o),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())},ta="Infinite Softcaps",na="Infinite Softcaps",aa="infinite-softcaps",ra="rft50",ia="",oa="",sa="0.0",la="Initial Commit",ua=!0,da=!1,ca=2,fa=!0,ma=null,pa="",ga=["main"],ha=3600,va=1,ba=!0,ya="base64";var U={title:ta,description:na,id:aa,author:ra,discordName:ia,discordLink:oa,versionNumber:sa,versionTitle:la,allowGoBack:ua,defaultShowSmall:da,defaultDecimalsShown:ca,useHeader:fa,banner:ma,logo:pa,initialTabs:ga,maxTickLength:ha,offlineLimit:va,enablePausing:ba,exportEncoding:ya};const Mt=17,_a=9e15,xa=Math.log10(9e15),wa=1/9e15,Na=308,ka=-324,Wt=5,Ma=function(){const e=[];for(let n=ka+1;n<=Na;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),De=[2,Math.E,3,4,5,6,7,8,9,10],Sa=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],$a=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],f=function(t){return c.fromValue_noAlloc(t)},P=function(e,t,n){return c.fromComponents(e,t,n)},D=function(t,n,a){return c.fromComponents_noNormalize(t,n,a)},$e=function(t,n){const a=n+1,r=Math.ceil(Math.log10(Math.abs(t))),i=Math.round(t*Math.pow(10,a-r))*Math.pow(10,r-a);return parseFloat(i.toFixed(Math.max(a-r,0)))},St=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Ca=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const a=e*e;let r=e;return n=n+1/(12*r),r=r*a,n=n+1/(360*r),r=r*a,n=n+1/(1260*r),r=r*a,n=n+1/(1680*r),r=r*a,n=n+1/(1188*r),r=r*a,n=n+691/(360360*r),r=r*a,n=n+7/(1092*r),r=r*a,n=n+3617/(122400*r),Math.exp(n)/t},nn=.5671432904097838,Yt=function(e,t=1e-10){let n,a;if(!Number.isFinite(e)||e===0)return e;if(e===1)return nn;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let r=0;r<100;++r){if(a=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(a-n)<t*Math.abs(a))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Zt(e,t=1e-10){let n,a,r,i;if(!Number.isFinite(e.mag)||e===c.dZero)return e;if(e===c.dOne)return f(nn);c.abs(e),n=c.ln(e);for(let l=0;l<100;++l){if(a=c.exp(-n),r=n.sub(e.mul(a)),i=n.sub(r.div(n.add(1).sub(n.add(2).mul(r).div(c.mul(2,n).add(2))))),c.abs(i.sub(n)).lt(c.abs(i).mul(t)))return i;n=i}throw Error(`Iteration failed to converge: ${e.toString()}`)}const v=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof v||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Ma(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new v().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new v().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new v().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new v().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new v().fromDecimal(e)}static fromNumber(e){return new v().fromNumber(e)}static fromString(e){return new v().fromString(e)}static fromValue(e){return new v().fromValue(e)}static fromValue_noAlloc(e){return e instanceof v?e:new v(e)}static abs(e){return f(e).abs()}static neg(e){return f(e).neg()}static negate(e){return f(e).neg()}static negated(e){return f(e).neg()}static sign(e){return f(e).sign}static sgn(e){return f(e).sign}static round(e){return f(e).round()}static floor(e){return f(e).floor()}static ceil(e){return f(e).ceil()}static trunc(e){return f(e).trunc()}static add(e,t){return f(e).add(t)}static plus(e,t){return f(e).add(t)}static sub(e,t){return f(e).sub(t)}static subtract(e,t){return f(e).sub(t)}static minus(e,t){return f(e).sub(t)}static mul(e,t){return f(e).mul(t)}static multiply(e,t){return f(e).mul(t)}static times(e,t){return f(e).mul(t)}static div(e,t){return f(e).div(t)}static divide(e,t){return f(e).div(t)}static recip(e){return f(e).recip()}static reciprocal(e){return f(e).recip()}static reciprocate(e){return f(e).reciprocate()}static cmp(e,t){return f(e).cmp(t)}static cmpabs(e,t){return f(e).cmpabs(t)}static compare(e,t){return f(e).cmp(t)}static isNaN(e){return e=f(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=f(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return f(e).eq(t)}static equals(e,t){return f(e).eq(t)}static neq(e,t){return f(e).neq(t)}static notEquals(e,t){return f(e).notEquals(t)}static lt(e,t){return f(e).lt(t)}static lte(e,t){return f(e).lte(t)}static gt(e,t){return f(e).gt(t)}static gte(e,t){return f(e).gte(t)}static max(e,t){return f(e).max(t)}static min(e,t){return f(e).min(t)}static minabs(e,t){return f(e).minabs(t)}static maxabs(e,t){return f(e).maxabs(t)}static clamp(e,t,n){return f(e).clamp(t,n)}static clampMin(e,t){return f(e).clampMin(t)}static clampMax(e,t){return f(e).clampMax(t)}static cmp_tolerance(e,t,n){return f(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return f(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return f(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return f(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return f(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return f(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return f(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return f(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return f(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return f(e).gte_tolerance(t,n)}static pLog10(e){return f(e).pLog10()}static absLog10(e){return f(e).absLog10()}static log10(e){return f(e).log10()}static log(e,t){return f(e).log(t)}static log2(e){return f(e).log2()}static ln(e){return f(e).ln()}static logarithm(e,t){return f(e).logarithm(t)}static pow(e,t){return f(e).pow(t)}static pow10(e){return f(e).pow10()}static root(e,t){return f(e).root(t)}static factorial(e,t){return f(e).factorial()}static gamma(e,t){return f(e).gamma()}static lngamma(e,t){return f(e).lngamma()}static exp(e){return f(e).exp()}static sqr(e){return f(e).sqr()}static sqrt(e){return f(e).sqrt()}static cube(e){return f(e).cube()}static cbrt(e){return f(e).cbrt()}static tetrate(e,t=2,n=D(1,0,1)){return f(e).tetrate(t,n)}static iteratedexp(e,t=2,n=D(1,0,1)){return f(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return f(e).iteratedlog(t,n)}static layeradd10(e,t){return f(e).layeradd10(t)}static layeradd(e,t,n=10){return f(e).layeradd(t,n)}static slog(e,t=10){return f(e).slog(t)}static lambertw(e){return f(e).lambertw()}static ssqrt(e){return f(e).ssqrt()}static pentate(e,t=2,n=D(1,0,1)){return f(e).pentate(t,n)}static affordGeometricSeries(e,t,n,a){return this.affordGeometricSeries_core(f(e),f(t),f(n),a)}static sumGeometricSeries(e,t,n,a){return this.sumGeometricSeries_core(e,f(t),f(n),a)}static affordArithmeticSeries(e,t,n,a){return this.affordArithmeticSeries_core(f(e),f(t),f(n),f(a))}static sumArithmeticSeries(e,t,n,a){return this.sumArithmeticSeries_core(f(e),f(t),f(n),f(a))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(f(e),f(t),f(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return D(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return D(t,0,1);const n=Math.floor(Math.random()*(e+1));let a=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));let r=Math.pow(10,a);return Math.random()>.9&&(r=Math.trunc(r)),P(t,n,r)}static affordGeometricSeries_core(e,t,n,a){const r=t.mul(n.pow(a));return v.floor(e.div(r).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,a){return t.mul(n.pow(a)).mul(v.sub(1,n.pow(e))).div(v.sub(1,n))}static affordArithmeticSeries_core(e,t,n,a){const i=t.add(a.mul(n)).sub(n.div(2)),l=i.pow(2);return i.neg().add(l.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,a){const r=t.add(a.mul(n));return e.div(2).mul(r.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<wa)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=_a)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<xa&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const p=parseFloat(t[0]),y=parseFloat(t[1]),N=t[1].split(";");let x=1;if(N.length===2&&(x=parseFloat(N[1]),isFinite(x)||(x=1)),isFinite(p)&&isFinite(y)){const L=v.pentate(p,y,x);return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,this}}const n=e.split("^^");if(n.length===2){const p=parseFloat(n[0]),y=parseFloat(n[1]),N=n[1].split(";");let x=1;if(N.length===2&&(x=parseFloat(N[1]),isFinite(x)||(x=1)),isFinite(p)&&isFinite(y)){const L=v.tetrate(p,y,x);return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,this}}const a=e.split("^");if(a.length===2){const p=parseFloat(a[0]),y=parseFloat(a[1]);if(isFinite(p)&&isFinite(y)){const N=v.pow(p,y);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,this}}e=e.trim().toLowerCase();let r,i,l=e.split("pt");if(l.length===2){r=10,i=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let p=parseFloat(l[1]);if(isFinite(p)||(p=1),isFinite(r)&&isFinite(i)){const y=v.tetrate(r,i,p);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,this}}if(l=e.split("p"),l.length===2){r=10,i=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let p=parseFloat(l[1]);if(isFinite(p)||(p=1),isFinite(r)&&isFinite(i)){const y=v.tetrate(r,i,p);return this.sign=y.sign,this.layer=y.layer,this.mag=y.mag,this}}const o=e.split("e"),u=o.length-1;if(u===0){const p=parseFloat(e);if(isFinite(p))return this.fromNumber(p)}else if(u===1){const p=parseFloat(e);if(isFinite(p)&&p!==0)return this.fromNumber(p)}const d=e.split("e^");if(d.length===2){this.sign=1,d[0].charAt(0)=="-"&&(this.sign=-1);let p="";for(let y=0;y<d[1].length;++y){const N=d[1].charCodeAt(y);if(N>=43&&N<=57||N===101)p+=d[1].charAt(y);else return this.layer=parseFloat(p),this.mag=parseFloat(d[1].substr(y+1)),this.normalize(),this}}if(u<1)return this.sign=0,this.layer=0,this.mag=0,this;const _=parseFloat(o[0]);if(_===0)return this.sign=0,this.layer=0,this.mag=0,this;let b=parseFloat(o[o.length-1]);if(u>=2){const p=parseFloat(o[o.length-2]);isFinite(p)&&(b*=Math.sign(p),b+=St(p))}if(!isFinite(_))this.sign=o[0]==="-"?-1:1,this.layer=u,this.mag=b;else if(u===1)this.sign=Math.sign(_),this.layer=1,this.mag=b+Math.log10(Math.abs(_));else if(this.sign=Math.sign(_),this.layer=u,u===2){const p=v.mul(P(1,2,b),f(_));return this.sign=p.sign,this.layer=p.layer,this.mag=p.mag,this}else this.mag=b;return this.normalize(),this}fromValue(e){return e instanceof v||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:$e(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:$e(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Wt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):$e(this.m,e)+"e"+$e(this.e,e):this.layer===1?$e(this.m,e)+"e"+$e(this.e,e):this.layer<=Wt?(this.sign===-1?"-":"")+"e".repeat(this.layer)+$e(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+$e(this.mag,e)}abs(){return D(this.sign===0?0:1,this.layer,this.mag)}neg(){return D(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?v.dZero:this.layer===0?P(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?v.dZero:this.layer===0?P(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?v.dZero:this.layer===0?P(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?v.dZero:this.layer===0?P(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=f(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return D(0,0,0);let n,a;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(v.cmpabs(this,t)>0?(n=this,a=t):(n=t,a=this),n.layer===0&&a.layer===0)return f(n.sign*n.mag+a.sign*a.mag);const r=n.layer*Math.sign(n.mag),i=a.layer*Math.sign(a.mag);if(r-i>=2)return n;if(r===0&&i===-1){if(Math.abs(a.mag-Math.log10(n.mag))>Mt)return n;{const l=Math.pow(10,Math.log10(n.mag)-a.mag),o=a.sign+n.sign*l;return P(Math.sign(o),1,a.mag+Math.log10(Math.abs(o)))}}if(r===1&&i===0){if(Math.abs(n.mag-Math.log10(a.mag))>Mt)return n;{const l=Math.pow(10,n.mag-Math.log10(a.mag)),o=a.sign+n.sign*l;return P(Math.sign(o),1,Math.log10(a.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(n.mag-a.mag)>Mt)return n;{const l=Math.pow(10,n.mag-a.mag),o=a.sign+n.sign*l;return P(Math.sign(o),1,a.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(f(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=f(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return D(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return D(this.sign*t.sign,0,1);let n,a;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,a=t):(n=t,a=this),n.layer===0&&a.layer===0)return f(n.sign*a.sign*n.mag*a.mag);if(n.layer>=3||n.layer-a.layer>=2)return P(n.sign*a.sign,n.layer,n.mag);if(n.layer===1&&a.layer===0)return P(n.sign*a.sign,1,n.mag+Math.log10(a.mag));if(n.layer===1&&a.layer===1)return P(n.sign*a.sign,1,n.mag+a.mag);if(n.layer===2&&a.layer===1){const r=P(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(P(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return P(n.sign*a.sign,r.layer+1,r.sign*r.mag)}if(n.layer===2&&a.layer===2){const r=P(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(P(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return P(n.sign*a.sign,r.layer+1,r.sign*r.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=f(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?v.dNaN:this.layer===0?P(this.sign,0,1/this.mag):P(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=f(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=f(e),n=this.mag>0?this.layer:-this.layer,a=t.mag>0?t.layer:-t.layer;return n>a?1:n<a?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=f(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=f(e);return this.lt(t)?t:this}min(e){const t=f(e);return this.gt(t)?t:this}maxabs(e){const t=f(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=f(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=f(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let a=this.mag,r=n.mag;return this.layer>n.layer&&(r=St(r)),this.layer<n.layer&&(a=St(a)),Math.abs(a-r)<=t*Math.max(Math.abs(a),Math.abs(r))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=f(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=f(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(v.dZero)?v.dZero:this.log10()}absLog10(){return this.sign===0?v.dNaN:this.layer>0?P(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):P(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?v.dNaN:this.layer>0?P(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):P(this.sign,0,Math.log10(this.mag))}log(e){return e=f(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?v.dNaN:this.layer===0&&e.layer===0?P(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):v.div(this.log10(),e.log10())}log2(){return this.sign<=0?v.dNaN:this.layer===0?P(this.sign,0,Math.log2(this.mag)):this.layer===1?P(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?P(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):P(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?v.dNaN:this.layer===0?P(this.sign,0,Math.log(this.mag)):this.layer===1?P(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?P(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):P(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=f(e),n=this,a=t;if(n.sign===0)return a.eq(0)?D(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(a.sign===0)return D(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return n;const r=n.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?r.neg():Math.abs(a.toNumber()%2)%2===0?r:v.dNaN:r}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return v.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return P(1,0,t);if(e.sign===0)return v.dOne;e=D(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?P(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?P(-e.sign,e.layer+1,-e.mag):v.dOne}pow_base(e){return f(e).pow(this)}root(e){const t=f(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(D(1,0,24)))return f(Ca(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let a=e,r=12*a,i=1/r,l=t+i;if(l===t||(t=l,a=a*n,r=360*a,i=1/r,l=t-i,l===t))return v.exp(t);t=l,a=a*n,r=1260*a;let o=1/r;return t=t+o,a=a*n,r=1680*a,o=1/r,t=t-o,v.exp(t)}else return this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?v.dOne:this.layer===0&&this.mag<=709.7?f(Math.exp(this.sign*this.mag)):this.layer===0?P(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?P(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):P(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return f(Math.sqrt(this.sign*this.mag));if(this.layer===1)return P(1,2,Math.log10(this.mag)-.3010299956639812);{const e=v.div(D(this.sign,this.layer-1,this.mag),D(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=D(1,0,1)){if(e===1)return v.pow(this,t);if(e===0)return new v(t);if(this.eq(v.dOne))return v.dOne;if(this.eq(-1))return v.pow(this,t);if(e===Number.POSITIVE_INFINITY){const r=this.toNumber();if(r<=1.444667861009766&&r>=.06598803584531254){if(r>1.444667861009099)return new v(Math.E);const i=v.ln(this).neg();return i.lambertw().div(i)}else return r>1.444667861009766?new v(Number.POSITIVE_INFINITY):v.dNaN}if(this.eq(v.dZero)){let r=Math.abs((e+1)%2);return r>1&&(r=2-r),new v(r)}if(e<0)return v.iteratedlog(t,this,-e);t=f(t);const n=e;e=Math.trunc(e);const a=n-e;if(this.gt(v.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let r=0;r<e;++r){const i=t;if(t=this.pow(t),i.eq(t))return t}if(a!=0){const r=this.pow(t);return t.mul(1-a).add(r.mul(a))}return t}a!==0&&(t.eq(v.dOne)?this.gt(10)?t=this.pow(a):(t=f(v.tetrate_critical(this.toNumber(),a)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let r=0;r<e;++r){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return D(t.sign,t.layer+(e-r-1),t.mag);if(r>1e4)return t}return t}iteratedexp(e=2,t=D(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return v.tetrate(e,-t,this);e=f(e);let n=f(this);const a=t;t=Math.trunc(t);const r=a-t;if(n.layer-e.layer>3){const i=Math.min(t,n.layer-e.layer-3);t-=i,n.layer-=i}for(let i=0;i<t;++i){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(i>1e4)return n}return r>0&&r<1&&(e.eq(10)?n=n.layeradd10(-r):n=n.layeradd(-r,e)),n}slog(e=10){if(e=f(e),e.lte(v.dZero)||e.eq(v.dOne))return v.dNaN;if(e.lt(v.dOne))return this.eq(v.dOne)?v.dZero:this.eq(v.dZero)?v.dNegOne:v.dNaN;if(this.mag<0||this.eq(v.dZero))return v.dNegOne;let t=0,n=f(this);if(n.layer-e.layer>3){const a=n.layer-e.layer-3;t+=a,n.layer-=a}for(let a=0;a<100;++a)if(n.lt(v.dZero))n=v.pow(e,n),t-=1;else{if(n.lte(v.dOne))return f(t+v.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=v.log(n,e)}return f(t)}static slog_critical(e,t){return e>10?t-1:v.critical_section(e,t,$a)}static tetrate_critical(e,t){return v.critical_section(e,t,Sa)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let a=0,r=0;for(let o=0;o<De.length;++o)if(De[o]==e){a=n[o][Math.floor(t)],r=n[o][Math.ceil(t)];break}else if(De[o]<e&&De[o+1]>e){const u=(e-De[o])/(De[o+1]-De[o]);a=n[o][Math.floor(t)]*(1-u)+n[o+1][Math.floor(t)]*u,r=n[o][Math.ceil(t)]*(1-u)+n[o+1][Math.ceil(t)]*u;break}const i=t-Math.floor(t);return a*(1-i)+r*i}layeradd10(e){e=v.fromValue_noAlloc(e).toNumber();const t=f(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let a=0;a<100;++a){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const a=this.slog(t).toNumber()+e;return a>=0?v.tetrate(t,a):Number.isFinite(a)?a>=-1?v.log(v.tetrate(t,a+1),t):v.log(v.log(v.tetrate(t,a+2),t),t):v.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return f(Yt(this.toNumber()));if(this.layer===0)return f(Yt(this.sign*this.mag));if(this.layer===1)return Zt(this);if(this.layer===2)return Zt(this);if(this.layer>=3)return D(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return D(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=D(1,0,1)){t=f(t);const n=e;e=Math.trunc(e);const a=n-e;a!==0&&(t.eq(v.dOne)?(++e,t=new v(a)):this.eq(10)?t=t.layeradd10(a):t=t.layeradd(a,this));for(let r=0;r<e;++r){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(r>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?f(Math.sin(this.sign*this.mag)):D(0,0,0)}cos(){return this.mag<0?v.dOne:this.layer===0?f(Math.cos(this.sign*this.mag)):D(0,0,0)}tan(){return this.mag<0?this:this.layer===0?f(Math.tan(this.sign*this.mag)):D(0,0,0)}asin(){return this.mag<0?this:this.layer===0?f(Math.asin(this.sign*this.mag)):D(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?f(Math.acos(this.toNumber())):this.layer===0?f(Math.acos(this.sign*this.mag)):D(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?f(Math.atan(this.sign*this.mag)):f(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return v.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return v.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?D(Number.NaN,Number.NaN,Number.NaN):v.ln(this.add(1).div(f(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(v.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let c=v;c.dZero=D(0,0,0);c.dOne=D(1,0,1);c.dNegOne=D(-1,0,1);c.dTwo=D(1,0,2);c.dTen=D(1,0,10);c.dNaN=D(Number.NaN,Number.NaN,Number.NaN);c.dInf=D(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);c.dNegInf=D(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);c.dNumberMax=P(1,0,Number.MAX_VALUE);c.dNumberMin=P(1,0,Number.MIN_VALUE);const Ta=new c(1);function Je(e,t,n=!0){let a=c.log10(e).floor(),r=c.div(e,c.pow(10,a));r.toStringWithDecimalPlaces(t)==="10"&&(r=Ta,a=a.add(1));const i=a.gte(1e9)?fe(a,Math.max(Math.max(t,3),U.defaultDecimalsShown)):a.gte(1e4)?pt(a,0):a.toStringWithDecimalPlaces(0);return n?r.toStringWithDecimalPlaces(t)+"e"+i:"e"+i}function pt(e,t){if(e==null)return"NaN";if(e=new c(e),e.mag<.001)return 0 .toFixed(t);const a=e.toStringWithDecimalPlaces(t).split(".");return a[0]=a[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),a.length==1?a[0]:a[0]+"."+a[1]}function an(e,t){return e==null?"NaN":(e=new c(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),U.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const Ia=new c("eeee1000"),Pa=new c("e100000"),Kt=new c("e1000"),rn=new c(1e9),Fa=new c(1e6),Oa=new c(1e3),Ea=new c(.98),Va=new c(.001),on=new c(0);function fe(e,t,n){if(t==null&&(t=U.defaultDecimalsShown),n=n!=null?n:U.defaultShowSmall,e=new c(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+fe(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(Ia)){const a=e.slog();return a.gte(Fa)?"F"+fe(a.floor()):c.pow(10,a.sub(a.floor())).toStringWithDecimalPlaces(3)+"F"+pt(a.floor(),0)}else{if(e.gte(Pa))return Je(e,0,!1);if(e.gte(Kt))return Je(e,0);if(e.gte(rn))return Je(e,t);if(e.gte(Oa))return pt(e,0);if(e.gte(Va)||!n)return an(e,t);if(e.eq(on))return 0 .toFixed(t)}return e=ln(e),e.lt(Kt)?Je(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):fe(e,t)+"\u207B\xB9"}function ce(e){return e=new c(e),e.sign<0?"-"+ce(e.neg()):e.gte(rn)||e.lte(Ea)&&!e.eq(on)?fe(e):fe(e,0)}function sn(e){return c.lt(e,0)?"-"+sn(c.neg(e)):c.gt(e,2**51)?fe(c.div(e,31536e3))+"y":(e=new c(e).toNumber(),e<60?fe(e)+"s":e<3600?ce(Math.floor(e/60))+"m "+fe(e%60)+"s":e<86400?ce(Math.floor(e/3600))+"h "+ce(Math.floor(e/60)%60)+"m "+ce(e%60)+"s":e<31536e3?ce(Math.floor(e/84600)%365)+"d "+ce(Math.floor(e/3600)%24)+"h "+ce(Math.floor(e/60)%60)+"m":ce(Math.floor(e/31536e3))+"y "+ce(Math.floor(e/84600)%365)+"d "+ce(Math.floor(e/3600)%24)+"h")}function Da(e,t,n){e=new c(e);let a=e.toStringWithDecimalPlaces(t);return new c(a).gte(n)&&(a=c.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),a}function Ra(e,t){return fe(e,t,!0)}function ln(e){let t=c.log10(e).ceil();const n=c.div(e,c.pow(10,t));return t=t.neg(),e=new c(10).pow(t).times(n),e}var Aa=Object.freeze(Object.defineProperty({__proto__:null,default:c,exponentialFormat:Je,commaFormat:pt,regularFormat:an,format:fe,formatWhole:ce,formatTime:sn,toPlaces:Da,formatSmall:Ra,invertOOM:ln},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:La,commaFormat:Ba,regularFormat:qa,format:ee,formatWhole:we,formatTime:yt,toPlaces:Ua,formatSmall:za,invertOOM:ja}=Aa;window.Decimal=c;window.exponentialFormat=La;window.commaFormat=Ba;window.regularFormat=qa;window.format=ee;window.formatWhole=we;window.formatTime=yt;window.toPlaces=Ua;window.formatSmall=za;window.invertOOM=ja;function Ga(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Ct(e){return typeof e=="function"}var Y=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(Y||{});const et=Symbol("DoNotCache");function C(e,t){const n=e[t];Ct(n)&&n.length===0&&!n[et]?e[t]=k(n.bind(e)):Ct(n)&&(e[t]=n.bind(e),e[t][et]=!0)}function Tt(e){return Ct(e)&&!e[et]&&(e=k(e)),e}const ve=Symbol("Component"),be=Symbol("GatherProps");let Ha=0;function We(e="feature-"){return e+Ha++}var ae=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(ae||{});function X(e){return e[et]=!0,e}function Q(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}const Re={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var Ot=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(Ot||{}),_t={classic:Re,paper:{...Re,variables:{...Re.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Re,variables:{...Re.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Re,variables:{...Re.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const H=Symbol("ProxyState"),ze=Symbol("ProxyPath");function Ve(e,t={}){const n=t;let a=!1;function r(){return a||(Object.assign(n,e(n)),a=!0),n}return new Proxy(n,{get(i,l){return l===H?r():r()[l]},set(i,l,o){return r()[l]=o,!0},has(i,l){return l===H?!0:Reflect.has(r(),l)},ownKeys(){return Reflect.ownKeys(r())},getOwnPropertyDescriptor(i,l){return a||(Object.assign(n,e(n)),a=!0),Object.getOwnPropertyDescriptor(i,l)}})}var j=window.state=It({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const un=it({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function dn(e){return JSON.stringify(e,(t,n)=>s(n))}const cn={get(e,t){var a;if(t===H||t===ze)return e[t];const n=e[H][t];if(t!=="value"&&(jn(n)||Array.isArray(n))){if(n!==((a=e[t])==null?void 0:a[H])){const r=[...e[ze],t];e[t]=new Proxy({[H]:n,[ze]:r},cn)}return e[t]}return n},set(e,t,n,a){if(!j.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof c&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const r=e[H][t];if(!(typeof r=="number"&&isNaN(r)||r instanceof c&&(isNaN(r.sign)||isNaN(r.layer)||isNaN(r.mag))))throw un.autosave=!1,j.hasNaN=!0,j.NaNPath=[...e[ze],t],j.NaNReceiver=a,console.error("Attempted to set NaN value",[...e[ze],t],e[H]),"Attempted to set NaN value. See above for details"}return e[H][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[H])},has(e,t){return Reflect.has(e[H],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[H],t)}};var S=window.player=new Proxy({[H]:un,[ze]:["player"]},cn);const oe=tn();let je=null,Xe=null;function gt(){const e=Date.now();let t=(e-S.time)/1e3;S.time=e;const n=t;if(j.lastTenTicks.push(n),j.lastTenTicks.length>10&&(j.lastTenTicks=j.lastTenTicks.slice(1)),!((Xe==null?void 0:Xe.value)&&!S.keepGoing)&&!j.hasNaN&&(t=Math.max(t,0),S.devSpeed!==0)){if(S.offlineTime!=null){if(c.gt(S.offlineTime,U.offlineLimit*3600)&&(S.offlineTime=U.offlineLimit*3600),c.gt(S.offlineTime,0)&&S.devSpeed!==0){const a=Math.max(S.offlineTime/10,t);S.offlineTime=S.offlineTime-a,t+=a}else S.devSpeed===0&&(S.offlineTime+=t);(!S.offlineProd||c.lt(S.offlineTime,0))&&(S.offlineTime=null)}t=Math.min(t,U.maxTickLength),S.devSpeed!=null&&(t*=S.devSpeed),Number.isFinite(t)||(t=1e308),!c.eq(t,0)&&(S.timePlayed+=t,Number.isFinite(S.timePlayed)||(S.timePlayed=1e308),oe.emit("update",t,n),K.unthrottled?(requestAnimationFrame(gt),je!=null&&(clearInterval(je),je=null)):je==null&&(je=setInterval(gt,50)))}}async function Wa(){Xe=(await mt(()=>Promise.resolve().then(function(){return Fn}),void 0)).hasWon,me(Xe,e=>{e&&oe.emit("gameWon")}),K.unthrottled?requestAnimationFrame(gt):je=setInterval(gt,50)}var Ya=Object.freeze(Object.defineProperty({__proto__:null,globalBus:oe,startGameLoop:Wa},Symbol.toStringTag,{value:"Module"}));function fn(e={}){return Object.assign({id:`${U.id}-0`,name:"Default Save",tabs:U.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:U.id,modVersion:U.versionNumber,layers:{}},e)}function pe(e){const t=Te.compressToUTF16(dn(e!=null?e:S[H]));return localStorage.setItem((e!=null?e:S[H]).id,t),t}async function Za(){Ja();try{let e=localStorage.getItem(K.active);if(e==null){await Ae(Ge());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Te.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==U.id){await Ae(Ge());return}t.id=K.active,await Ae(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Ae(Ge())}}function Ge(){const e=dt(),t=fn({id:e});return pe(t),K.saves.push(e),t}function dt(){let e,t=0;do e=`${U.id}-${t++}`;while(localStorage.getItem(e));return e}async function Ae(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:a}=await mt(()=>Promise.resolve().then(function(){return _r}),void 0),{fixOldSave:r,getInitialLayers:i}=await mt(()=>Promise.resolve().then(function(){return Fn}),void 0);for(const l in t){const o=t[l];o&&n(o)}i(e).forEach(l=>a(l,e)),e=fn(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==U.versionNumber&&r(e.modVersion,e),Object.assign(S,e),K.active=S.id}setInterval(()=>{S.autosave&&pe()},1e3);window.onbeforeunload=()=>{S.autosave&&pe()};window.save=pe;const Ka=window.hardReset=async()=>{await Ae(Ge())},tt=it({active:"",saves:[],showTPS:!0,theme:Ot.Nordic,unthrottled:!1});me(tt,e=>{const t=Te.compressToUTF16(JSON.stringify(e));localStorage.setItem(U.id,t)},{deep:!0});var K=window.settings=tt;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:Ot.Nordic};oe.emit("loadSettings",e),Object.assign(tt,e),Ka()};function Ja(){try{let e=localStorage.getItem(U.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=Te.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(tt,t)}oe.emit("loadSettings",tt)}catch{}}const Xa=it([]),Qa=it([]),er=it([]),tr={class:"table"},nr=A({__name:"Row",setup(e){const t=k(()=>_t[K.theme].mergeAdjacent);return(n,a)=>(h(),w("div",tr,[m("div",{class:re(["row",{mergeAdjacent:s(t)}])},[_e(n.$slots,"default")],2)]))}});function ar(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Dn(e)}function G(e,t="span"){return typeof e=="function"?A({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),A({template:e})):A({render:()=>({})}):e}function Ye(e){if(Ze(e))return typeof e=="function"?e():G(e);const t=e[ve];return g(t,e[be](),null)}function $t(...e){let t;return g(nr,null,ar(t=e.map(Ye))?t:{default:()=>[t]})}function ct(e){if(Ze(e))return typeof e=="function"?e():typeof e=="string"?g(Z,null,[e]):g(e,null,null);const t=e[ve];return g(t,e[be](),null)}function Ze(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[et]===!0}function mn(e,t){const n=T(null),a=T(void 0);function r(o){n.value||(n.value=setInterval(l,250)),a.value=o}function i(){n.value&&(clearInterval(n.value),n.value=null)}function l(){t&&t.value?t.value():e&&e.value&&e.value(a.value)}return Qt(i),{start:r,stop:i,handleHolding:l}}function rr(e,t="div"){const n=xe();return Ie(()=>{n.value=G(le(e),t)}),n}function xt(e,t="div"){const n=xe(null);return Ie(()=>{const a=le(e);n.value=a==null?null:G(a,t)}),n}function ir(e){return k(()=>le(e))}function le(e){return s(s(e))}function V(...e){return e.includes(Object)||e.push(Object),e}var z=(e,t)=>{const n=e.__vccOpts||e;for(const[a,r]of t)n[a]=r;return n};const or=A({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var _;const n=T({}),a=new ResizeObserver(o),r=T(null);bt(()=>{const b=r.value;b!=null&&a.observe(b)});let i=!0,l=T((_=r.value)==null?void 0:_.getBoundingClientRect());function o(){r.value!=null&&i&&(i=!1,Ne(()=>{var b;l.value=(b=r.value)==null?void 0:b.getBoundingClientRect(),Object.values(n.value).filter(p=>p).forEach(p=>p.rect=p.element.getBoundingClientRect()),t("updateNodes",n.value),i=!0}))}document.fonts.ready.then(o);const u={attributes:!1,childList:!0,subtree:!1};st(Et,(b,p)=>{const y=new MutationObserver(()=>d(b));y.observe(p,u),n.value[b]={element:p,observer:y,rect:p.getBoundingClientRect()},t("updateNodes",n.value),Ne(()=>d(b))}),st(Vt,b=>{var p;(p=n.value[b])==null||p.observer.disconnect(),n.value[b]=void 0,t("updateNodes",n.value)}),st(Dt,n),st(Rt,l);function d(b){const p=n.value[b];p!=null&&(p.rect=p.element.getBoundingClientRect(),t("updateNodes",n.value))}return(b,p)=>(h(),w(Z,null,[_e(b.$slots,"default",{},void 0,!0),m("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}});var pn=z(or,[["__scopeId","data-v-6a08ac80"]]);const sr=["onPointerdown"],lr={class:"modal-wrapper"},ur={class:"modal-container"},dr={class:"modal-header"},cr=E(" default header "),fr={class:"modal-body"},mr=E(" default body "),pr={class:"modal-footer"},gr=m("div",{class:"modal-default-flex-grow"},null,-1),Be=A({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const r=ne(e),i=k(()=>r.modelValue||o.value);function l(){n("update:modelValue",!1)}const o=T(!1),u=T(null),d=k(()=>{var _,b;return(b=(_=u.value)==null?void 0:_.nodes)!=null?b:null});return t({isOpen:i,nodes:d}),(_,b)=>(h(),R(An,{to:"#modal-root"},[g(Ft,{name:"modal",onBeforeEnter:b[0]||(b[0]=p=>o.value=!0),onAfterLeave:b[1]||(b[1]=p=>o.value=!1)},{default:F(()=>[Pt(m("div",Le({class:"modal-mask",onPointerdown:Qe(l,["self"])},_.$attrs),[m("div",lr,[m("div",ur,[m("div",dr,[_e(_.$slots,"header",{shown:s(i)},()=>[cr])]),m("div",fr,[g(pn,{ref_key:"contextRef",ref:u},{default:F(()=>[_e(_.$slots,"body",{shown:s(i)},()=>[mr])]),_:3},512)]),m("div",pr,[_e(_.$slots,"footer",{shown:s(i)},()=>[m("div",{class:"modal-default-footer"},[gr,m("button",{class:"button modal-default-button",onClick:l}," Close ")])])])])])],16,sr),[[Rn,e.modelValue]])]),_:3})]))}}),nt=Symbol("PersistentState"),at=Symbol("DefaultValue"),ht=Symbol("StackTrace"),gn=Symbol("Deleted");function hr(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function qe(e){const t=J(e)?e:T(e);return t[nt]=t,t[at]=J(e)?e.value:e,t[ht]=hr(),t[gn]=!1,ge.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[ht]):He[ge[ge.length-1]].add(t),t}oe.on("addLayer",(e,t)=>{const n=[],a=(r,i=[])=>{let l=!1;return Object.keys(r).forEach(o=>{const u=r[o];if(u&&typeof u=="object")if(nt in u){if(l=!0,u[gn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",u,`
Created at:
`+u[ht]);return}He[e.id].delete(H in u?u[H]:u);const d=i.reduce((b,p)=>(p in b||(b[p]={}),b[p]),t),_=d[o];d[o]=u[nt],Ln(d)?_!=null?d[o]=_:d[o]=u[at]:_!=null?d[o].value=_:d[o].value=u[at]}else!(u instanceof c)&&!J(u)&&!n.includes(u)&&(typeof u.type=="symbol"&&n.push(u),a(u,[...i,o])&&(jt(u)&&!jt(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",H in r?r[H]:r,o):l=!0))}),l};a(e),He[e.id].forEach(r=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,r,`
Created at:
`+r[ht])}),He[e.id].clear()});const Et=Symbol("RegisterNode"),Vt=Symbol("UnregisterNode"),Dt=Symbol("Nodes"),Rt=Symbol("Bounds"),ie=It({});window.layers=ie;const He={},ge=[];function wt(e,t){return Ve(()=>{const n={},a=n.emitter=tn();if(n.on=a.on.bind(a),n.emit=a.emit.bind(a),n.nodes=T({}),n.id=e,ge.push(e),He[e]=new Set,n.minimized=qe(!1),Object.assign(n,t.call(n)),ge[ge.length-1]==null||ge[ge.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${ge}
Trying to pop ${n.id}`;return ge.pop(),C(n,"color"),C(n,"display"),C(n,"name"),Q(n,"name",n.id),C(n,"minWidth"),Q(n,"minWidth",600),C(n,"minimizable"),Q(n,"minimizable",!0),n})}function hn(e,t){if(console.info("Adding layer",e.id),ie[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ie[e.id]);return}Q(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ie[e.id]=e,oe.emit("addLayer",e,t.layers[e.id])}function vr(e){return ie[e]}function vn(e){console.info("Removing layer",e.id),oe.emit("removeLayer",e),ie[e.id]=void 0}function br(e){vn(e),hn(e,S)}function yr(e){const t=T(!1);return{openModal:()=>t.value=!0,modal:X(()=>g(Be,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>g("h2",null,[s(e.name)]),body:s(e.display)}))}}oe.on("update",function(t){Object.values(ie).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ie).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ie).forEach(n=>{n==null||n.emit("postUpdate",t)})});var _r=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:Et,UnregisterNodeInjectionKey:Vt,NodesInjectionKey:Dt,BoundsInjectionKey:Rt,layers:ie,persistentRefs:He,addingLayers:ge,createLayer:wt,addLayer:hn,getLayer:vr,removeLayer:vn,reloadLayer:br,setupLayerModal:yr},Symbol.toStringTag,{value:"Module"}));const xr=A({components:{Context:pn},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:V(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:V(Number,String),required:!0},name:{type:V(String),required:!0},color:V(String),minimizable:V(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:a,minWidth:r,tab:i}=ne(e),l=rr(t),o=k(()=>U.allowGoBack&&n.value>0&&!a.value);function u(){S.tabs.splice(s(e.index),1/0)}Ne(()=>_(a.value,s(r.value))),me([a,ir(r)],([b,p])=>_(b,p));function d(b){e.nodes.value=b}function _(b,p){const y=typeof p=="number"||Number.isNaN(parseInt(p))?p+"px":p,N=i.value();N!=null&&(b?(N.style.flexGrow="0",N.style.flexShrink="0",N.style.width="60px",N.style.minWidth=N.style.flexBasis="",N.style.margin="0"):(N.style.flexGrow="",N.style.flexShrink="",N.style.width="",N.style.minWidth=N.style.flexBasis=y,N.style.margin=""))}return{component:l,showGoBack:o,updateNodes:d,unref:s,goBack:u}}});function wr(e,t,n,a,r,i){const l=Pe("Context");return h(),w("div",{class:"layer-container",style:ue({"--layer-color":e.unref(e.color)})},[e.showGoBack?(h(),w("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},"\u2190")):I("",!0),e.minimized.value?(h(),w("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=o=>e.minimized.value=!1)},[m("div",null,B(e.unref(e.name)),1)])):(h(),w("div",{key:2,class:re(["layer-tab",{showGoBack:e.showGoBack}])},[g(l,{onUpdateNodes:e.updateNodes},{default:F(()=>[(h(),R(te(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(h(),w("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=o=>e.minimized.value=!0)}," \u25BC ")):I("",!0)],4)}var Nr=z(xr,[["render",wr],["__scopeId","data-v-34c9d881"]]);const bn=e=>(Oe("data-v-4b4bda40"),e=e(),Ee(),e),kr=bn(()=>m("h2",null,"Changelog",-1)),Mr=bn(()=>m("details",{open:""},[m("summary",null,[E("v0.0 Initial Commit - "),m("time",null,"2021-09-04")]),E(" This is the first release :D "),m("ul",null,[m("li",{class:"feature"},"Did everything"),m("li",{class:"fix"},"Had some fun"),m("li",{class:"breaking"},"Removed everything"),m("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Sr=A({__name:"Changelog",setup(e,{expose:t}){const n=T(!1);return t({open(){n.value=!0}}),(a,r)=>(h(),R(Be,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=i=>n.value=i)},{header:F(()=>[kr]),body:F(()=>[Mr]),_:1},8,["modelValue"]))}});var $r=z(Sr,[["__scopeId","data-v-4b4bda40"]]),Cr=A({props:{element:Object,display:{type:V(Object,String,Function),required:!0},style:V(Object,String,Array),classes:V(Object),direction:V(String),xoffset:V(String),yoffset:V(String),pinned:Object},setup(e){const{element:t,display:n,pinned:a}=ne(e),r=T(!1),i=k(()=>(le(a)||r.value)&&l.value),l=xt(n),o=xe(G(X(()=>{const _=le(t);return _==null?"":ct(_)})));function u(_){const b=a;_.shiftKey&&b&&(b.value=!b.value,_.stopPropagation(),_.preventDefault())}const d=k(()=>le(a)&&_t[K.theme].showPin);return{Direction:Y,isHovered:r,isShown:i,comp:l,elementComp:o,unref:s,togglePinned:u,showPin:d}}});const Tr={key:0,class:"material-icons pinned"};function Ir(e,t,n,a,r,i){return h(),w("div",{class:re(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=l=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=l=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...l)=>e.togglePinned&&e.togglePinned(...l))},[_e(e.$slots,"default",{},void 0,!0),e.elementComp?(h(),R(te(e.elementComp),{key:0})):I("",!0),g(Ft,{name:"fade"},{default:F(()=>{var l;return[e.isShown?(h(),w("div",{key:0,class:re(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:ue([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(l=e.unref(e.style))!=null?l:{}])},[e.showPin?(h(),w("span",Tr,"push_pin")):I("",!0),e.comp?(h(),R(te(e.comp),{key:1})):I("",!0)],6)):I("",!0)]}),_:1})],34)}var W=z(Cr,[["render",Ir],["__scopeId","data-v-6102fa3a"]]);const Ue=e=>(Oe("data-v-7dec2dec"),e=e(),Ee(),e),Pr={class:"info-modal-header"},Fr=["src","alt"],Or={class:"info-modal-title"},Er={key:0},Vr={key:0},Dr={key:0},Rr=Ue(()=>m("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Ar=Ue(()=>m("br",null,null,-1)),Lr=Ue(()=>m("br",null,null,-1)),Br=["href"],qr=Ue(()=>m("span",{class:"material-icons info-modal-discord"},"discord",-1)),Ur=Ue(()=>m("div",null,[m("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[m("span",{class:"material-icons info-modal-discord"},"discord"),E(" The Paper Pilot Community ")])],-1)),zr=Ue(()=>m("div",null,[m("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[m("span",{class:"material-icons info-modal-discord"},"discord"),E(" The Modding Tree ")])],-1)),jr=Ue(()=>m("br",null,null,-1));var Gr=A({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:a,logo:r,author:i,discordName:l,discordLink:o,versionNumber:u,versionTitle:d}=U,_=ne(n),b=T(!1),p=k(()=>yt(S.timePlayed)),y=k(()=>G(X(()=>g(Z,null,[Qa.map(Ye)]))));t({open(){b.value=!0}});function N(){var x;(x=s(_.changelog))==null||x.open()}return(x,L)=>(h(),R(Be,{modelValue:b.value,"onUpdate:modelValue":L[0]||(L[0]=Me=>b.value=Me)},{header:F(()=>[m("div",Pr,[s(r)?(h(),w("img",{key:0,class:"info-modal-logo",src:s(r),alt:s(a)},null,8,Fr)):I("",!0),m("div",Or,[m("h2",null,B(s(a)),1),m("h4",null,[E(" v"+B(s(u)),1),s(d)?(h(),w("span",Er,": "+B(s(d)),1)):I("",!0)])])])]),body:F(({shown:Me})=>[Me?(h(),w("div",Vr,[s(i)?(h(),w("div",Dr,"By "+B(s(i)),1)):I("",!0),Rr,Ar,m("div",{class:"link",onClick:N},"Changelog"),Lr,m("div",null,[s(o)?(h(),w("a",{key:0,href:s(o),class:"info-modal-discord-link"},[qr,E(" "+B(s(l)),1)],8,Br)):I("",!0)]),Ur,zr,jr,m("div",null,"Time Played: "+B(s(p)),1),(h(),R(te(s(y))))])):I("",!0)]),_:1},8,["modelValue"]))}});var Hr=z(Gr,[["__scopeId","data-v-7dec2dec"]]);const Wr={class:"field"},Yr={key:0,class:"field-title"},yn=A({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var l;const n=e,a=xt(Fe(n,"title"),"span"),r=T((l=n.options.find(o=>o.value===n.modelValue))!=null?l:null);me(Fe(n,"modelValue"),o=>{var u;le(r)!==o&&(r.value=(u=n.options.find(d=>d.value===o))!=null?u:null)});function i(o){t("update:modelValue",o.value)}return(o,u)=>(h(),w("div",Wr,[s(a)?(h(),w("span",Yr,[(h(),R(te(s(a))))])):I("",!0),g(s(Gn),{options:e.options,modelValue:r.value,"onUpdate:modelValue":[u[0]||(u[0]=d=>r.value=d),i],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}});const Zr={class:"field"},Kr=A({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=k(()=>G(s(n.title)||"<span></span>","span")),r=k({get(){return!!n.modelValue},set(i){t("update:modelValue",i)}});return(i,l)=>(h(),w("label",Zr,[Pt(m("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":l[0]||(l[0]=o=>J(r)?r.value=o:null)},null,512),[[Bn,s(r)]]),(h(),R(te(s(a))))]))}});var Ce=z(Kr,[["__scopeId","data-v-2b109500"]]);const _n=e=>(Oe("data-v-bc13791c"),e=e(),Ee(),e),Jr=_n(()=>m("div",{class:"header"},[m("h2",null,"Options")],-1)),Xr=_n(()=>m("hr",null,null,-1));var Qr=A({__name:"Options",setup(e,{expose:t}){const n=T(!1);t({open(){n.value=!0}});const a=Object.keys(_t).map(N=>({label:Ga(N),value:N})),r=k(()=>G(X(()=>g(Z,null,[Xa.map(Ye)])))),{showTPS:i,theme:l,unthrottled:o}=ne(K),{autosave:u,offlineProd:d}=ne(S),_=k({get(){return S.devSpeed===0},set(N){S.devSpeed=N?0:null}}),b=X(()=>g("span",null,[E("Offline Production"),g(W,{display:"Save-specific"},{default:()=>[E("*")]})])),p=X(()=>g("span",null,[E("Autosave"),g(W,{display:"Save-specific"},{default:()=>[E("*")]})])),y=X(()=>g("span",null,[E("Pause game"),g(W,{display:"Save-specific"},{default:()=>[E("*")]})]));return(N,x)=>(h(),R(Be,{modelValue:n.value,"onUpdate:modelValue":x[6]||(x[6]=L=>n.value=L)},{header:F(()=>[Jr]),body:F(()=>[g(yn,{title:"Theme",options:s(a),modelValue:s(l),"onUpdate:modelValue":x[0]||(x[0]=L=>J(l)?l.value=L:null)},null,8,["options","modelValue"]),(h(),R(te(s(r)))),g(Ce,{title:"Show TPS",modelValue:s(i),"onUpdate:modelValue":x[1]||(x[1]=L=>J(i)?i.value=L:null)},null,8,["modelValue"]),Xr,g(Ce,{title:"Unthrottled",modelValue:s(o),"onUpdate:modelValue":x[2]||(x[2]=L=>J(o)?o.value=L:null)},null,8,["modelValue"]),g(Ce,{title:s(b),modelValue:s(d),"onUpdate:modelValue":x[3]||(x[3]=L=>J(d)?d.value=L:null)},null,8,["title","modelValue"]),g(Ce,{title:s(p),modelValue:s(u),"onUpdate:modelValue":x[4]||(x[4]=L=>J(u)?u.value=L:null)},null,8,["title","modelValue"]),s(U).enablePausing?(h(),R(Ce,{key:0,title:s(y),modelValue:s(_),"onUpdate:modelValue":x[5]||(x[5]=L=>J(_)?_.value=L:null)},null,8,["title","modelValue"])):I("",!0)]),_:1},8,["modelValue"]))}});var ei=z(Qr,[["__scopeId","data-v-bc13791c"]]);const ti=["onSubmit"],ni={class:"field"},ai={key:0,class:"field-title"},ri=["placeholder"],ii=A({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null},emits:["update:modelValue","submit"],setup(e,{emit:t}){const a=ne(e),r=k(()=>{var u;return((u=a.title)==null?void 0:u.value)&&G(s(a.title.value),"span")}),i=T(null);bt(()=>{var u;(u=i.value)==null||u.focus()});const l=k({get(){return s(a.modelValue)||""},set(u){t("update:modelValue",u)}});function o(){t("submit")}return(u,d)=>(h(),w("form",{onSubmit:Qe(o,["prevent"])},[m("div",ni,[s(r)?(h(),w("span",ai,[(h(),R(te(s(r))))])):I("",!0),e.textArea?(h(),R(s(Wn),{key:1,modelValue:s(l),"onUpdate:modelValue":d[0]||(d[0]=_=>J(l)?l.value=_:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:o,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):Pt((h(),w("input",{key:2,type:"text","onUpdate:modelValue":d[1]||(d[1]=_=>J(l)?l.value=_:null),placeholder:e.placeholder,class:re({fullWidth:!e.title}),onBlur:o,ref_key:"field",ref:i},null,42,ri)),[[qn,s(l)]])])],40,ti))}});var xn=z(ii,[["__scopeId","data-v-d74adb0a"]]);const oi={key:0},si=["onClick","disabled"],li={key:0},ui=["onClick"],di=A({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const a=ne(e),r=T(!1);me(r,o=>{t("confirmingChanged",o)});function i(){if(s(a.skipConfirm)){t("click");return}r.value&&t("click"),r.value=!r.value}function l(){r.value=!1}return(o,u)=>(h(),w("span",{class:re(["container",{confirming:r.value}])},[r.value?(h(),w("span",oi,"Are you sure?")):I("",!0),m("button",{onClick:Qe(i,["stop"]),class:"button danger",disabled:e.disabled},[r.value?(h(),w("span",li,"Yes")):_e(o.$slots,"default",{key:1},void 0,!0)],8,si),r.value?(h(),w("button",{key:1,class:"button",onClick:Qe(l,["stop"])},"No",8,ui)):I("",!0)],2))}});var ci=z(di,[["__scopeId","data-v-2f8ef34c"]]);const fi=["onClick"],mi=A({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=T(!1),a=T(null);function r(){t("click"),a.value&&clearTimeout(a.value),n.value=!1,Ne(()=>{n.value=!0,a.value=setTimeout(()=>n.value=!1,500)})}return(i,l)=>(h(),w("button",{onClick:Qe(r,["stop"]),class:re(["feedback",{activated:n.value,left:e.left}])},[_e(i.$slots,"default",{},void 0,!0)],10,fi))}});var pi=z(mi,[["__scopeId","data-v-01a1b95c"]]);const ke=e=>(Oe("data-v-0136bef4"),e=e(),Ee(),e),gi=ke(()=>m("div",{class:"handle material-icons"},"drag_handle",-1)),hi={key:0,class:"actions"},vi=ke(()=>m("span",{class:"material-icons"},"content_paste",-1)),bi=ke(()=>m("span",{class:"material-icons"},"content_copy",-1)),yi=ke(()=>m("span",{class:"material-icons"},"edit",-1)),_i=ke(()=>m("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),xi={key:1,class:"actions"},wi=ke(()=>m("span",{class:"material-icons"},"check",-1)),Ni=ke(()=>m("span",{class:"material-icons"},"close",-1)),ki={key:2,class:"details"},Mi={class:"save-version"},Si=ke(()=>m("br",null,null,-1)),$i={key:0},Ci={key:3,class:"details"},Ti={key:4,class:"details error"},Ii=ke(()=>m("br",null,null,-1)),Pi=A({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:a}=ne(n),r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),i=T(!1),l=T(!1),o=T("");me(i,()=>o.value=a.value.name||"");const u=k(()=>a.value&&a.value.id===S.id),d=k(()=>u.value?S.time:a.value&&a.value.time||0);function _(){t("editName",o.value),i.value=!1}return(b,p)=>(h(),w("div",{class:re(["save",{active:s(u)}])},[gi,i.value?(h(),w("div",xi,[m("button",{onClick:_,class:"button"},[g(W,{display:"Save",direction:s(Y).Left,class:"info"},{default:F(()=>[wi]),_:1},8,["direction"])]),m("button",{onClick:p[5]||(p[5]=y=>i.value=!i.value),class:"button"},[g(W,{display:"Cancel",direction:s(Y).Left,class:"info"},{default:F(()=>[Ni]),_:1},8,["direction"])])])):(h(),w("div",hi,[s(a).error==null&&!l.value?(h(),R(pi,{key:0,onClick:p[0]||(p[0]=y=>t("export")),class:"button",left:""},{default:F(()=>[g(W,{display:"Export",direction:s(Y).Left,class:"info"},{default:F(()=>[vi]),_:1},8,["direction"])]),_:1})):I("",!0),s(a).error==null&&!l.value?(h(),w("button",{key:1,onClick:p[1]||(p[1]=y=>t("duplicate")),class:"button"},[g(W,{display:"Duplicate",direction:s(Y).Left,class:"info"},{default:F(()=>[bi]),_:1},8,["direction"])])):I("",!0),s(a).error==null&&!l.value?(h(),w("button",{key:2,onClick:p[2]||(p[2]=y=>i.value=!i.value),class:"button"},[g(W,{display:"Edit Name",direction:s(Y).Left,class:"info"},{default:F(()=>[yi]),_:1},8,["direction"])])):I("",!0),g(ci,{disabled:s(u),onClick:p[3]||(p[3]=y=>t("delete")),onConfirmingChanged:p[4]||(p[4]=y=>l.value=y)},{default:F(()=>[g(W,{display:"Delete",direction:s(Y).Left,class:"info"},{default:F(()=>[_i]),_:1},8,["direction"])]),_:1},8,["disabled"])])),s(a).error==null&&!i.value?(h(),w("div",ki,[m("button",{class:"button open",onClick:p[6]||(p[6]=y=>t("open"))},[m("h3",null,B(s(a).name),1)]),m("span",Mi,"v"+B(s(a).modVersion),1),Si,s(d)?(h(),w("div",$i,"Last played "+B(s(r).format(s(d))),1)):I("",!0)])):s(a).error==null&&i.value?(h(),w("div",Ci,[g(xn,{modelValue:o.value,"onUpdate:modelValue":p[7]||(p[7]=y=>o.value=y),class:"editname",onSubmit:_},null,8,["modelValue"])])):(h(),w("div",Ti,[E(" Error: Failed to load save with id "+B(s(a).id),1),Ii,E(B(s(a).error),1)]))],2))}});var Fi=z(Pi,[["__scopeId","data-v-0136bef4"]]);const At=e=>(Oe("data-v-3b9991aa"),e=e(),Ee(),e),Oi=At(()=>m("h2",null,"Saves Manager",-1)),Ei={class:"modal-footer"},Vi={class:"field"},Di=At(()=>m("span",{class:"field-title"},"Create Save",-1)),Ri={class:"field-buttons"},Ai={class:"footer"},Li=At(()=>m("div",{style:{"flex-grow":"1"}},null,-1)),Bi=A({__name:"SavesManager",setup(e,{expose:t}){const n=T(!1),a=T(null);t({open(){n.value=!0}});const r=T(!1),i=T(""),l=T(null);me(i,M=>{M?Ne(()=>{try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Te.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M),r.value=!0;return}const $=JSON.parse(M);if(typeof $!="object"){r.value=!0;return}const q=dt();$.id=q,pe($),i.value="",r.value=!1,K.saves.push(q)}catch{r.value=!0}}):r.value=!1});let o={},u=T(Object.keys(o).reduce((M,$)=>(M.push({label:$.split("/").slice(-1)[0].slice(0,-4),value:o[$]}),M),[]));const d=It({});function _(M){if(d[M]==null){let $=localStorage.getItem(M);if($==null)d[M]={error:"Save doesn't exist in localStorage",id:M};else if($==="dW5kZWZpbmVk")d[M]={error:"Save is undefined",id:M};else try{if($[0]!=="{")if($[0]==="e")$=decodeURIComponent(escape(atob($)));else if($[0]==="\u1BE1")$=Te.decompressFromUTF16($);else return console.warn("Unable to determine preset encoding",$),r.value=!0,d[M]={error:"Unable to determine preset encoding",id:M},d[M];d[M]={...JSON.parse($),id:M}}catch(q){d[M]={error:q,id:M},console.warn(`SavesManager: Failed to load info about save with id ${M}:
${q}
${$}`)}}return d[M]}me(n,M=>{M&&Object.keys(d).forEach($=>delete d[$])});const b=k(()=>K.saves.reduce((M,$)=>(M[$]=_($),M),{}));function p(M){let $;switch(S.id===M?$=dn(S[H]):$=JSON.stringify(b.value[M]),U.exportEncoding){default:console.warn(`Unknown save encoding: ${U.exportEncoding}. Defaulting to lz`);case"lz":$=Te.compressToUTF16($);break;case"base64":$=btoa(unescape(encodeURIComponent($)));break;case"plain":break}const q=document.createElement("textarea");q.value=$,document.body.appendChild(q),q.select(),q.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(q)}function y(M){S.id===M&&pe();const $={...b.value[M],id:dt()};pe($),K.saves.push($.id)}function N(M){K.saves=K.saves.filter($=>$!==M),localStorage.removeItem(M),d[M]=void 0}function x(M){b.value[S.id].time=S.time,pe(),d[S.id]=void 0,Ae(b.value[M]),d[M]=void 0}function L(M){if(l.value=M,Ne(()=>{l.value=null}),M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=Te.decompressFromUTF16(M);else{console.warn("Unable to determine preset encoding",M);return}const $=JSON.parse(M);$.id=dt(),pe($),K.saves.push($.id),x($.id)}function Me(M,$){const q=b.value[M];q&&(q.name=$,S.id===M?(S.name=$,pe()):(pe(q),d[M]=void 0))}return(M,$)=>(h(),R(Be,{modelValue:n.value,"onUpdate:modelValue":$[4]||($[4]=q=>n.value=q),ref_key:"modal",ref:a},{header:F(()=>[Oi]),body:F(({shown:q})=>[q?(h(),R(s(Hn),{key:0,list:s(K).saves,handle:".handle",itemKey:he=>he},{item:F(({element:he})=>[g(Fi,{save:s(b)[he],onOpen:Se=>x(he),onExport:Se=>p(he),onEditName:Se=>Me(he,Se),onDuplicate:Se=>y(he),onDelete:Se=>N(he)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):I("",!0)]),footer:F(()=>[m("div",Ei,[g(xn,{modelValue:i.value,"onUpdate:modelValue":$[0]||($[0]=q=>i.value=q),title:"Import Save",placeholder:"Paste your save here!",class:re({importingFailed:r.value})},null,8,["modelValue","class"]),m("div",Vi,[Di,m("div",Ri,[m("button",{class:"button",onClick:$[1]||($[1]=q=>x(s(Ge)().id))},"New Game"),Object.keys(s(u)).length>0?(h(),R(yn,{key:0,options:s(u),modelValue:l.value,"onUpdate:modelValue":$[2]||($[2]=q=>L(q)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):I("",!0)])]),m("div",Ai,[Li,m("button",{class:"button modal-default-button",onClick:$[3]||($[3]=q=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var wn=z(Bi,[["__scopeId","data-v-3b9991aa"]]);const de=e=>(Oe("data-v-4a3f8425"),e=e(),Ee(),e),qi=["src","alt"],Ui={key:1,class:"title"},zi=de(()=>m("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),ji={class:"discord"},Gi={class:"discord-links"},Hi={key:0},Wi=["href"],Yi=de(()=>m("li",null,[m("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Zi=de(()=>m("li",null,[m("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Ki={href:"https://forums.moddingtree.com/",target:"_blank"},Ji=de(()=>m("span",{class:"material-icons"},"forum",-1)),Xi=de(()=>m("span",{class:"material-icons"},"info",-1)),Qi=de(()=>m("span",{class:"material-icons"},"library_books",-1)),eo=de(()=>m("span",{class:"material-icons"},"settings",-1)),to=de(()=>m("span",{class:"material-icons"},"library_books",-1)),no=de(()=>m("span",{class:"material-icons"},"settings",-1)),ao=de(()=>m("span",{class:"material-icons"},"info",-1)),ro={href:"https://forums.moddingtree.com/",target:"_blank"},io=de(()=>m("span",{class:"material-icons"},"forum",-1)),oo={class:"discord"},so={class:"discord-links"},lo={key:0},uo=["href"],co=de(()=>m("li",null,[m("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),fo=de(()=>m("li",null,[m("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),mo=A({__name:"Nav",setup(e){const t=T(null),n=T(null),a=T(null),r=T(null),{useHeader:i,banner:l,title:o,discordName:u,discordLink:d,versionNumber:_}=U;function b(){window.open(d,"mywindow")}return(p,y)=>(h(),w(Z,null,[s(i)?(h(),w("div",Le({key:0,class:"nav"},p.$attrs),[s(l)?(h(),w("img",{key:0,src:s(l),class:"banner",alt:s(o)},null,8,qi)):(h(),w("div",Ui,B(s(o)),1)),m("div",{onClick:y[0]||(y[0]=N=>{var x;return(x=r.value)==null?void 0:x.open()}),class:"version-container"},[g(W,{display:"Changelog",direction:s(Y).Down,class:"version"},{default:F(()=>[m("span",null,"v"+B(s(_)),1)]),_:1},8,["direction"])]),zi,m("div",ji,[m("span",{onClick:b,class:"material-icons"},"discord"),m("ul",Gi,[s(d)?(h(),w("li",Hi,[m("a",{href:s(d),target:"_blank"},B(s(u)),9,Wi)])):I("",!0),Yi,Zi])]),m("div",null,[m("a",Ki,[g(W,{display:"Forums",direction:s(Y).Down,yoffset:"5px"},{default:F(()=>[Ji]),_:1},8,["direction"])])]),m("div",{onClick:y[1]||(y[1]=N=>{var x;return(x=t.value)==null?void 0:x.open()})},[g(W,{display:"Info",direction:s(Y).Down,class:"info"},{default:F(()=>[Xi]),_:1},8,["direction"])]),m("div",{onClick:y[2]||(y[2]=N=>{var x;return(x=n.value)==null?void 0:x.open()})},[g(W,{display:"Saves",direction:s(Y).Down,xoffset:"-20px"},{default:F(()=>[Qi]),_:1},8,["direction"])]),m("div",{onClick:y[3]||(y[3]=N=>{var x;return(x=a.value)==null?void 0:x.open()})},[g(W,{display:"Options",direction:s(Y).Down,xoffset:"-66px"},{default:F(()=>[eo]),_:1},8,["direction"])])],16)):(h(),w("div",Le({key:1,class:"overlay-nav"},p.$attrs),[m("div",{onClick:y[4]||(y[4]=N=>{var x;return(x=r.value)==null?void 0:x.open()}),class:"version-container"},[g(W,{display:"Changelog",direction:s(Y).Right,xoffset:"25%",class:"version"},{default:F(()=>[m("span",null,"v"+B(s(_)),1)]),_:1},8,["direction"])]),m("div",{onClick:y[5]||(y[5]=N=>{var x;return(x=n.value)==null?void 0:x.open()})},[g(W,{display:"Saves",direction:s(Y).Right},{default:F(()=>[to]),_:1},8,["direction"])]),m("div",{onClick:y[6]||(y[6]=N=>{var x;return(x=a.value)==null?void 0:x.open()})},[g(W,{display:"Options",direction:s(Y).Right},{default:F(()=>[no]),_:1},8,["direction"])]),m("div",{onClick:y[7]||(y[7]=N=>{var x;return(x=t.value)==null?void 0:x.open()})},[g(W,{display:"Info",direction:s(Y).Right},{default:F(()=>[ao]),_:1},8,["direction"])]),m("div",null,[m("a",ro,[g(W,{display:"Forums",direction:s(Y).Right,xoffset:"7px"},{default:F(()=>[io]),_:1},8,["direction"])])]),m("div",oo,[m("span",{onClick:b,class:"material-icons"},"discord"),m("ul",so,[s(d)?(h(),w("li",lo,[m("a",{href:s(d),target:"_blank"},B(s(u)),9,uo)])):I("",!0),co,fo])])],16)),g(Hr,{ref_key:"info",ref:t,changelog:r.value},null,8,["changelog"]),g(wn,{ref_key:"savesManager",ref:n},null,512),g(ei,{ref_key:"options",ref:a},null,512),g($r,{ref_key:"changelog",ref:r},null,512)],64))}});var Nn=z(mo,[["__scopeId","data-v-4a3f8425"]]);const po={class:"inner-tab"},go=A({__name:"Game",setup(e){const t=Fe(S,"tabs"),n=k(()=>Object.keys(ie)),a=U.useHeader;function r(i){const{display:l,minimized:o,minWidth:u,name:d,color:_,minimizable:b,nodes:p}=i;return{display:l,minimized:o,minWidth:u,name:d,color:_,minimizable:b,nodes:p}}return(i,l)=>(h(),w("div",{class:re(["tabs-container",{useHeader:s(a)}])},[(h(!0),w(Z,null,en(s(t),(o,u)=>{var d,_;return h(),w("div",{key:u,class:re(["tab",s((d=s(ie)[o])==null?void 0:d.classes)]),ref_for:!0,ref:`tab-${u}`,style:ue(s((_=s(ie)[o])==null?void 0:_.style))},[u===0&&!s(a)?(h(),R(Nn,{key:0})):I("",!0),m("div",po,[s(n).includes(o)?(h(),R(Nr,Le({key:0},r(s(ie)[o]),{index:u,tab:()=>{var b;return(b=i.$refs[`tab-${u}`])==null?void 0:b[0]}}),null,16,["index","tab"])):(h(),R(te(o),{key:1,index:u},null,8,["index"]))])],6)}),128))],2))}});var ho=z(go,[["__scopeId","data-v-4cb9ce0f"]]);const vo=A({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(e){return(t,n)=>(h(),w("div",{style:ue({width:e.width,height:e.height})},null,4))}});function Lt(e,t="points",n=0,a=void 0){const r=J(e)?e:qe(e);return r.displayName=t,r.precision=n,r.small=a,r}function bo(e){const t=qe(e.value);return me(e,n=>{c.gt(n,t.value)&&(t.value=n)}),t}function yo(e){const t=qe(e.value);return me(e,(n,a)=>{c.gt(n,a)&&(t.value=c.add(t.value,c.sub(n,a)))}),t}const _o=new c("10^^8"),xo=new c("1e100");function wo(e,t){const n=T(0),a=T(0),r=T(0);return oe.on("update",l=>{if(a.value=0,c.lte(e.value,xo)){r.value=e.value;return}let o=e.value,u=r.value;if(r.value=o,c.gt(o,u))if(c.gte(o,_o))o=c.slog(o,1e10),u=c.slog(u,1e10),n.value=o.sub(u).div(l),a.value=-1;else for(;c.div(o,u).log(10).div(l).gte("100")&&a.value<=5&&c.gt(u,0);)o=c.log10(o),u=c.log10(u),n.value=o.sub(u).div(l),a.value++}),k(()=>a.value===0?t?ee(t.value,e.precision,e.small)+" "+e.displayName+"/s":"":ee(n.value)+" OOM"+(a.value<0?"^OOM":"^"+a.value)+"s/sec")}function rt(e,t){const n=t!=null?t:e.value;return c.eq(e.precision,0)?we(n):ee(n,e.precision,e.small)}const No=["x1","y1","x2","y2"],ko=A({__name:"Link",props:{link:null,startNode:null,endNode:null,boundingRect:null},setup(e){const n=ne(e),a=k(()=>{const i=n.startNode.value.rect,l=n.boundingRect.value,o=l?{x:i.x+i.width/2-l.x,y:i.y+i.height/2-l.y}:{x:0,y:0};return n.link.value.offsetStart&&(o.x+=n.link.value.offsetStart.x,o.y+=n.link.value.offsetStart.y),o}),r=k(()=>{const i=n.endNode.value.rect,l=n.boundingRect.value,o=l?{x:i.x+i.width/2-l.x,y:i.y+i.height/2-l.y}:{x:0,y:0};return n.link.value.offsetEnd&&(o.x+=n.link.value.offsetEnd.x,o.y+=n.link.value.offsetEnd.y),o});return(i,l)=>(h(),w("line",Le({"stroke-width":"15px",stroke:"white"},e.link,{x1:s(a).x,y1:s(a).y,x2:s(r).x,y2:s(r).y}),null,16,No))}});const Mo=A({__name:"Links",props:{links:null},setup(e){var u;const n=Fe(e,"links"),a=T(null),r=ft(Dt,T({})),i=ft(Rt,T(void 0)),l=T((u=a.value)==null?void 0:u.getBoundingClientRect());me(i,()=>{var d;return l.value=(d=a.value)==null?void 0:d.getBoundingClientRect()}),bt(()=>{var d;return l.value=(d=a.value)==null?void 0:d.getBoundingClientRect()});const o=k(()=>{var _,b;const d=r.value;return(b=(_=n.value)==null?void 0:_.filter(p=>{var y,N;return((y=d[p.startNode.id])==null?void 0:y.rect)&&((N=d[p.startNode.id])==null?void 0:N.rect)}))!=null?b:[]});return(d,_)=>(h(),w(Z,null,[s(o)?(h(),w("svg",Un(Le({key:0},d.$attrs)),[(h(!0),w(Z,null,en(s(o),(b,p)=>(h(),R(ko,{key:p,link:b,boundingRect:l.value,startNode:s(r)[b.startNode.id],endNode:s(r)[b.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):I("",!0),m("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}});var So=z(Mo,[["__scopeId","data-v-063f6d6b"]]),$o=A({props:{nodes:{type:V(Array),required:!0},leftSideNodes:V(Array),rightSideNodes:V(Array),branches:V(Array)},components:{Links:So},setup(e){const{nodes:t,leftSideNodes:n,rightSideNodes:a}=ne(e),r=xe();Ie(()=>{const o=le(t);r.value=G(X(()=>g(Z,null,[o.map(u=>g("span",{class:"row tree-row",style:"margin: 50px auto;"},[u.map(ct)]))])))});const i=xe();Ie(()=>{const o=le(n);i.value=o?G(X(()=>g("span",{class:"left-side-nodes small"},[o.map(ct)]))):""});const l=xe();return Ie(()=>{const o=le(a);l.value=o?G(X(()=>g("span",{class:"side-nodes small"},[o.map(ct)]))):""}),{unref:s,nodesComp:r,leftNodesComp:i,rightNodesComp:l}}});function Co(e,t,n,a,r,i){const l=Pe("Links");return h(),w(Z,null,[(h(),R(te(e.nodesComp))),e.leftNodesComp?(h(),R(te(e.leftNodesComp),{key:0})):I("",!0),e.rightNodesComp?(h(),R(te(e.rightNodesComp),{key:1})):I("",!0),e.branches?(h(),R(l,{key:2,links:e.unref(e.branches)},null,8,["links"])):I("",!0)],64)}var To=z($o,[["render",Co],["__scopeId","data-v-39ca96d0"]]);const Io={key:0},Po={key:0,class:"mark star"},Fo=["src"],Oo=A({__name:"MarkNode",props:{mark:{type:[Boolean,String]}},setup(e){return(t,n)=>e.mark?(h(),w("div",Io,[e.mark===!0?(h(),w("div",Po)):(h(),w("img",{key:1,class:"mark",src:e.mark},null,8,Fo))])):I("",!0)}});var Bt=z(Oo,[["__scopeId","data-v-2207999f"]]);const Eo=A({__name:"Node",props:{id:null},setup(e){const n=ne(e),a=ft(Et,()=>{}),r=ft(Vt,()=>{}),i=T(null),l=k(()=>i.value&&i.value.parentElement);return me([l,n.id],([o,u],[d,_])=>{d&&r(s(_)),o&&a(u,o)}),Qt(()=>r(s(n.id))),(o,u)=>(h(),w("div",{class:"node",ref_key:"node",ref:i},null,512))}});var qt=z(Eo,[["__scopeId","data-v-2cb1bb79"]]);const Vo=A({props:{display:V(Object,String,Function),visibility:{type:V(Number),required:!0},style:V(String,Object,Array),classes:V(Object),onClick:Function,onHold:Function,color:V(String),glowColor:V(String),canClick:{type:V(Boolean),required:!0},mark:V(Boolean,String),id:{type:String,required:!0}},components:{MarkNode:Bt,Node:qt},setup(e){const{onClick:t,onHold:n,display:a}=ne(e),r=xt(a),{start:i,stop:l}=mn(t,n);return{start:i,stop:l,comp:r,unref:s,Visibility:ae,isCoercableComponent:Ze}}});function Do(e,t,n,a,r,i){var u;const l=Pe("MarkNode"),o=Pe("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),w("div",{key:0,style:ue({visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0}),class:re({treeNode:!0,can:e.unref(e.canClick),...e.unref(e.classes)}),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d))},[m("div",{style:ue([{backgroundColor:e.unref(e.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${e.unref(e.glowColor)}`},(u=e.unref(e.style))!=null?u:[]])},[(h(),R(te(e.unref(e.comp))))],4),g(l,{mark:e.unref(e.mark)},null,8,["mark"]),g(o,{id:e.id},null,8,["id"])],38)):I("",!0)}var Ro=z(Vo,[["render",Do],["__scopeId","data-v-1c0c107d"]]);const Ao=Symbol("TreeNode"),Lo=Symbol("Tree");function Bo(e){return Ve(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=We("treeNode-"),t.type=Ao,t[ve]=Ro,C(t,"visibility"),Q(t,"visibility",ae.Visible),C(t,"canClick"),Q(t,"canClick",!0),C(t,"color"),C(t,"display"),C(t,"glowColor"),C(t,"classes"),C(t,"style"),C(t,"mark"),t.onClick){const a=t.onClick.bind(t);t.onClick=function(){s(t.canClick)&&a()}}if(t.onHold){const a=t.onHold.bind(t);t.onHold=function(){s(t.canClick)&&a()}}return t[be]=function(){const{display:a,visibility:r,style:i,classes:l,onClick:o,onHold:u,color:d,glowColor:_,canClick:b,mark:p,id:y}=this;return{display:a,visibility:r,style:i,classes:l,onClick:o,onHold:u,color:d,glowColor:_,canClick:b,mark:p,id:y}},t})}function qo(e){return Ve(()=>{const t=e();return t.id=We("tree-"),t.type=Lo,t[ve]=To,t.isResetting=T(!1),t.resettingNode=xe(null),t.reset=function(n){var r,i;const a=t;a.isResetting.value=!0,a.resettingNode.value=n,(r=a.resetPropagation)==null||r.call(a,a,n),(i=a.onReset)==null||i.call(a,n),a.isResetting.value=!1,a.resettingNode.value=null},t.links=k(()=>{var a;return(a=s(t.branches))!=null?a:[]}),C(t,"visibility"),Q(t,"visibility",ae.Visible),C(t,"nodes"),C(t,"leftSideNodes"),C(t,"rightSideNodes"),C(t,"branches"),t[be]=function(){const{nodes:n,leftSideNodes:a,rightSideNodes:r,branches:i}=this;return{nodes:n,leftSideNodes:a,rightSideNodes:r,branches:i}},t})}const Uo=function(e,t){const n=[t];let a=[t];if(e.branches!=null){const r=s(e.branches);for(;a.length>0;){const i=[];a.forEach(l=>{r.filter(o=>o.startNode===l||o.endNode===l).map(o=>o.startNode===l?o.endNode:o.startNode).filter(o=>!n.includes(o)).forEach(o=>{var u;i.includes(o)||(i.push(o),(u=o.reset)==null||u.reset())})}),a=i,n.push(...a)}}};function kn(e,t=null,n=0){const a=Tt(n);return k(()=>t==null||c.gte(e.value,s(a))?rt(e)+" "+e.displayName:`Reach ${c.eq(t.precision,0)?we(s(a)):ee(s(a),t.precision)} ${t.displayName} to unlock (You have ${c.eq(t.precision,0)?we(t.value):ee(t.value,t.precision)})`)}function zo(e){return Ve(()=>{const t=e();return t.currentGain==null&&(t.currentGain=k(()=>{let n=t.gainModifier?t.gainModifier.apply(t.scaling.currentGain(t)):t.scaling.currentGain(t);return n=c.floor(n).max(0),s(t.buyMax)||(n=n.min(1)),n})),t.actualGain==null&&(t.actualGain=t.currentGain),t.currentAt==null&&(t.currentAt=k(()=>{let n=t.scaling.currentAt(t);return t.roundUpCost&&(n=c.ceil(n)),n})),t.nextAt==null&&(t.nextAt=k(()=>{let n=t.scaling.nextAt(t);return t.roundUpCost&&(n=c.ceil(n)),n})),t.convert==null&&(t.convert=function(){var a;const n=s(t.currentGain);t.gainResource.value=c.add(t.gainResource.value,n),t.spend(n),(a=t.onConvert)==null||a.call(t,n)}),t.spend==null&&(t.spend=function(){t.baseResource.value=0}),C(t,"currentGain"),C(t,"actualGain"),C(t,"currentAt"),C(t,"nextAt"),C(t,"buyMax"),Q(t,"buyMax",!0),C(t,"roundUpCost"),Q(t,"roundUpCost",!0),t})}function jo(e,t){const n=Tt(e),a=Tt(t);return{currentGain(r){let i=s(r.baseResource.value);if(r.costModifier&&(i=r.costModifier.apply(i)),c.lt(i,s(n)))return 0;const l=c.div(i,s(n)).pow(s(a));return l.isNan()?new c(0):l},currentAt(r){let i=s(r.currentGain);return r.gainModifier&&(i=r.gainModifier.revert(i)),i=c.max(0,i).root(s(a)).times(s(n)),r.costModifier&&(i=r.costModifier.revert(i)),i},nextAt(r){let i=c.add(s(r.currentGain),1).floor();return r.gainModifier&&(i=r.gainModifier.revert(i)),i=c.max(0,i).root(s(a)).times(s(n)).max(s(n)),r.costModifier&&(i=r.costModifier.revert(i)),i}}}function Go(e){return zo(e)}const Ho=Symbol("Reset");function Mn(e){return Ve(()=>{const t=e();return t.id=We("reset-"),t.type=Ho,t.reset=function(){var a;const n=r=>{r&&typeof r=="object"&&(nt in r?r[nt].value=r[at]:!(r instanceof c)&&!J(r)&&Object.values(r).forEach(i=>n(i)))};s(t.thingsToReset).forEach(n),oe.emit("reset",t),(a=t.onReset)==null||a.call(t)},C(t,"thingsToReset"),t})}const lt={};oe.on("removeLayer",e=>{var t;(t=lt[e.id])==null||t.call(lt),lt[e.id]=void 0});const Wo=A({__name:"Sticky",setup(e){const t=T("0"),n=new ResizeObserver(r),a=T(null);function r(){let i=a.value;if(i==null)return;let l=0;for(;i.previousSibling;){const o=i.previousSibling;o.dataset&&"vSticky"in o.dataset&&(l+=o.offsetHeight),i=o}t.value=l+"px"}return Ne(r),document.fonts.ready.then(r),bt(()=>{var l;const i=(l=a.value)==null?void 0:l.parentElement;i&&n.observe(i)}),(i,l)=>(h(),w("div",{class:"sticky",style:ue({top:t.value}),ref_key:"element",ref:a,"data-v-sticky":""},[_e(i.$slots,"default",{},void 0,!0)],4))}});var Yo=z(Wo,[["__scopeId","data-v-21495571"]]);const Zo=A({__name:"Resource",props:{resource:null,color:null},setup(e){const t=e,n=k(()=>rt(t.resource));return(a,r)=>(h(),w("h2",{style:ue({color:e.color,"text-shadow":"0px 0px 10px "+e.color})},B(s(n)),5))}});const Ko={class:"main-display"},Jo={key:0},Xo={key:1},Qo=E(", "),Sn=A({__name:"MainDisplay",props:{resource:null,color:null,classes:null,style:null,effectDisplay:null},setup(e){const n=ne(e),a=T(null),r=xt(n.effectDisplay),i=k(()=>c.lt(n.resource.value,"1e1000"));return(l,o)=>(h(),R(Yo,null,{default:F(()=>{var u,d;return[m("div",{class:"main-display-container",style:ue({height:`${((d=(u=a.value)==null?void 0:u.$el.clientHeight)!=null?d:0)+50}px`})},[m("div",Ko,[s(i)?(h(),w("span",Jo,"You have ")):I("",!0),g(Zo,{resource:e.resource,color:e.color||"white"},null,8,["resource","color"]),E(" "+B(e.resource.displayName),1),s(r)?(h(),w("span",Xo,[Qo,(h(),R(te(s(r)),{ref_key:"effectRef",ref:a},null,512))])):I("",!0)])],4)]}),_:1}))}});function $n(e,t){return C(t,"display"),C(t,"classes"),C(t,"style"),C(t,"direction"),Q(t,"direction",Y.Up),C(t,"xoffset"),C(t,"yoffset"),t.pinnable&&("pinned"in e?(console.error("Cannot add pinnable tooltip to element that already has a property called 'pinned'"),t.pinnable=!1):e.pinned=t.pinned=qe(!1)),Ne(()=>{const n=e[ve];e[ve]=W;const a=e[be].bind(e);e[be]=function(){const{display:i,classes:l,style:o,direction:u,xoffset:d,yoffset:_,pinned:b}=this;return{element:{[ve]:n,[be]:a},display:i,classes:l,style:s(o),direction:u,xoffset:d,yoffset:_,pinned:b}}.bind(t)}),t}var es=A({props:{display:{type:V(Object,String,Function),required:!0},visibility:{type:V(Number),required:!0},style:V(Object,String,Array),classes:V(Object),onClick:Function,onHold:Function,canClick:{type:V(Boolean),required:!0},small:Boolean,mark:V(Boolean,String),id:{type:String,required:!0}},components:{Node:qt,MarkNode:Bt},setup(e){const{display:t,onClick:n,onHold:a}=ne(e),r=xe("");Ie(()=>{const o=le(t);if(o==null){r.value="";return}if(Ze(o)){r.value=G(o);return}const u=G(o.title||"","h3"),d=G(o.description,"div");r.value=G(X(()=>g("span",null,[o.title?g("div",null,[g(u,null,null)]):null,g(d,null,null)])))});const{start:i,stop:l}=mn(n,a);return{start:i,stop:l,comp:r,Visibility:ae,unref:s}}});function ts(e,t,n,a,r,i){var u;const l=Pe("MarkNode"),o=Pe("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),w("button",{key:0,style:ue([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:[]]),onClick:t[0]||(t[0]=(...d)=>e.onClick&&e.onClick(...d)),onMousedown:t[1]||(t[1]=(...d)=>e.start&&e.start(...d)),onMouseleave:t[2]||(t[2]=(...d)=>e.stop&&e.stop(...d)),onMouseup:t[3]||(t[3]=(...d)=>e.stop&&e.stop(...d)),onTouchstartPassive:t[4]||(t[4]=(...d)=>e.start&&e.start(...d)),onTouchendPassive:t[5]||(t[5]=(...d)=>e.stop&&e.stop(...d)),onTouchcancelPassive:t[6]||(t[6]=(...d)=>e.stop&&e.stop(...d)),class:re({feature:!0,clickable:!0,can:e.unref(e.canClick),locked:!e.unref(e.canClick),small:e.small,...e.unref(e.classes)})},[e.unref(e.comp)?(h(),R(te(e.unref(e.comp)),{key:0})):I("",!0),g(l,{mark:e.unref(e.mark)},null,8,["mark"]),g(o,{id:e.id},null,8,["id"])],38)):I("",!0)}var Cn=z(es,[["render",ts],["__scopeId","data-v-5e7c90cf"]]);const ns=Symbol("Clickable");function as(e){return Ve(()=>{var n;const t=(n=e==null?void 0:e())!=null?n:{};if(t.id=We("clickable-"),t.type=ns,t[ve]=Cn,C(t,"visibility"),Q(t,"visibility",ae.Visible),C(t,"canClick"),Q(t,"canClick",!0),C(t,"classes"),C(t,"style"),C(t,"mark"),C(t,"display"),t.onClick){const a=t.onClick.bind(t);t.onClick=function(r){s(t.canClick)&&a(r)}}if(t.onHold){const a=t.onHold.bind(t);t.onHold=function(){s(t.canClick)&&a()}}return t[be]=function(){const{display:a,visibility:r,style:i,classes:l,onClick:o,onHold:u,canClick:d,small:_,mark:b,id:p}=this;return{display:a,visibility:r,style:s(i),classes:l,onClick:o,onHold:u,canClick:d,small:_,mark:b,id:p}},t})}function rs(e){return as(()=>{const t=e();C(t,"showNextAt"),Q(t,"showNextAt",!0),Q(t,"minimumGain",1),t.resetDescription==null?t.resetDescription=k(()=>c.lt(t.conversion.gainResource.value,1e3)?"Reset for ":""):C(t,"resetDescription"),t.display==null&&(t.display=X(()=>g("span",null,[s(t.resetDescription),g("b",null,[rt(t.conversion.gainResource,c.max(s(t.conversion.actualGain),s(t.minimumGain)))])," ",t.conversion.gainResource.displayName,s(t.showNextAt)?g("div",null,[g("br",null,null),s(t.conversion.buyMax)?"Next:":"Req:"," ",rt(t.conversion.baseResource,s(t.conversion.buyMax)||c.floor(s(t.conversion.actualGain)).neq(1)?s(t.conversion.nextAt):s(t.conversion.currentAt))," ",t.conversion.baseResource.displayName]):null]))),t.canClick==null&&(t.canClick=k(()=>c.gte(s(t.conversion.actualGain),s(t.minimumGain))));const n=t.onClick;return t.onClick=function(){!s(t.canClick)||(t.conversion.convert(),t.tree.reset(t.treeNode),t.resetTime&&(t.resetTime.value=t.resetTime[at]),n==null||n())},t})}function Tn(e){return Bo(()=>{const t=e();return C(t,"display"),Q(t,"display",t.layerID),C(t,"append"),{...t,display:t.display,onClick:s(t.append)?function(){if(S.tabs.includes(t.layerID)){const n=S.tabs.lastIndexOf(t.layerID);S.tabs.splice(n,1)}else S.tabs.push(t.layerID)}:function(){S.tabs.splice(1,1,t.layerID)}}})}const Jt="p",In=wt(Jt,()=>{const e="Prestige",t="#4BDC13",n=Lt(0,"prestige points"),a=Go(()=>({scaling:jo(10,.5),baseResource:vt.points,gainResource:n,roundUpCost:!0})),r=Mn(()=>({thingsToReset:()=>[In]})),i=Tn(()=>({layerID:Jt,color:t,reset:r}));$n(i,{display:kn(n),pinnable:!0});const l=rs(()=>({conversion:a,tree:vt.tree,treeNode:i}));return{name:e,color:t,points:n,display:X(()=>g(Z,null,[g(Sn,{resource:n,color:t},null),Ye(l)])),treeNode:i}}),is=Symbol("Buyable");function ut(e){const t=qe(0);return Ve(()=>{var i,l;const n=e();if(n.canPurchase==null&&(n.resource==null||n.cost==null))throw console.warn("Cannot create buyable without a canPurchase property or a resource and cost property",n),"Cannot create buyable without a canPurchase property or a resource and cost property";n.id=We("buyable-"),n.type=is,n[ve]=Cn,n.amount=t,n.canAfford=k(()=>{const o=n,u=s(o.cost);return o.resource!=null&&u!=null&&c.gte(o.resource.value,u)}),n.canPurchase==null&&(n.canPurchase=k(()=>s(n.visibility)===ae.Visible&&s(n.canAfford)&&c.lt(n.amount.value,s(n.purchaseLimit)))),n.maxed=k(()=>c.gte(n.amount.value,s(n.purchaseLimit))),C(n,"classes");const a=n.classes;n.classes=k(()=>{const o=s(a)||{};return n.maxed.value&&(o.bought=!0),o}),C(n,"canPurchase"),n.canClick=n.canPurchase,n.onClick=n.purchase=(l=(i=n.onClick)!=null?i:n.purchase)!=null?l:function(){var d;const o=n;if(!s(o.canPurchase))return;const u=s(o.cost);o.cost!=null&&o.resource!=null&&(o.resource.value=c.sub(o.resource.value,u),o.amount.value=c.add(o.amount.value,1)),(d=o.onPurchase)==null||d.call(o,u)},C(n,"display");const r=n.display;return n.display=X(()=>{const o=s(r);if(Ze(o)){const u=G(o);return g(u,null,null)}if(o!=null&&n.cost!=null&&n.resource!=null){const u=n,d=G(o.title||"","h3"),_=G(o.description||""),b=G(o.effectDisplay||"");return g("span",null,[o.title?g("div",null,[g(d,null,null)]):null,o.description?g(_,null,null):null,o.showAmount===!1?null:g("div",null,[g("br",null,null),s(u.purchaseLimit)===c.dInf?g(Z,null,[E("Amount: "),we(u.amount.value)]):g(Z,null,[E("Amount: "),we(u.amount.value),E(" /")," ",we(s(u.purchaseLimit))])]),o.effectDisplay?g("div",null,[g("br",null,null),E("Currently: "),g(b,null,null)]):null,u.cost&&!u.maxed.value?g("div",null,[g("br",null,null),E("Cost: "),ee(s(u.cost)||0)," ",n.resource.displayName]):null])}return""}),C(n,"visibility"),Q(n,"visibility",ae.Visible),C(n,"cost"),C(n,"resource"),C(n,"purchaseLimit"),Q(n,"purchaseLimit",c.dInf),C(n,"style"),C(n,"mark"),C(n,"small"),n[be]=function(){const{display:o,visibility:u,style:d,classes:_,onClick:b,canClick:p,small:y,mark:N,id:x}=this;return{display:o,visibility:u,style:s(d),classes:_,onClick:b,canClick:p,small:y,mark:N,id:x}},n})}var os=A({props:{display:{type:V(String,Object,Function),required:!0},visibility:{type:V(Number),required:!0},style:V(String,Object,Array),classes:V(Object),resource:Object,cost:V(String,Object,Number),canPurchase:{type:V(Boolean),required:!0},bought:{type:V(Boolean),required:!0},mark:V(Boolean,String),id:{type:String,required:!0},purchase:{type:Function,required:!0}},components:{Node:qt,MarkNode:Bt},setup(e){const{display:t,cost:n}=ne(e),a=xe("");return Ie(()=>{const r=le(t);if(r==null){a.value="";return}if(Ze(r)){a.value=G(r);return}const i=le(n),l=G(r.title||"","h3"),o=G(r.description,"div"),u=G(r.effectDisplay||"");a.value=G(X(()=>{var d;return g("span",null,[r.title?g("div",null,[g(l,null,null)]):null,g(o,null,null),r.effectDisplay?g("div",null,[E("Currently: "),g(u,null,null)]):null,e.resource!=null?g(Z,null,[g("br",null,null),E("Cost: "),e.resource&&rt(e.resource,i)," ",(d=e.resource)==null?void 0:d.displayName]):null])}))}),{component:a,unref:s,Visibility:ae}}});const ss=["disabled"];function ls(e,t,n,a,r,i){var u;const l=Pe("MarkNode"),o=Pe("Node");return e.unref(e.visibility)!==e.Visibility.None?(h(),w("button",{key:0,style:ue([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(u=e.unref(e.style))!=null?u:{}]),onClick:t[0]||(t[0]=(...d)=>e.purchase&&e.purchase(...d)),class:re({feature:!0,upgrade:!0,can:e.unref(e.canPurchase),locked:!e.unref(e.canPurchase),bought:e.unref(e.bought),...e.unref(e.classes)}),disabled:!e.unref(e.canPurchase)},[e.unref(e.component)?(h(),R(te(e.unref(e.component)),{key:0})):I("",!0),g(l,{mark:e.unref(e.mark)},null,8,["mark"]),g(o,{id:e.id},null,8,["id"])],14,ss)):I("",!0)}var us=z(os,[["render",ls],["__scopeId","data-v-7742f590"]]);const ds=Symbol("Upgrade");function Ke(e){const t=qe(!1);return Ve(()=>{const n=e();return n.id=We("upgrade-"),n.type=ds,n[ve]=us,n.canAfford==null&&(n.resource==null||n.cost==null)&&console.warn("Error: can't create upgrade without a canAfford property or a resource and cost property",n),n.bought=t,n.canAfford==null?n.canAfford=k(()=>{const a=n;return a.resource!=null&&a.cost!=null&&c.gte(a.resource.value,s(a.cost))}):C(n,"canAfford"),n.canPurchase=k(()=>s(n.visibility)===ae.Visible&&s(n.canAfford)&&!s(n.bought)),n.purchase=function(){var r;const a=n;!s(a.canPurchase)||(a.resource!=null&&a.cost!=null&&(a.resource.value=c.sub(a.resource.value,s(a.cost))),t.value=!0,(r=a.onPurchase)==null||r.call(a))},C(n,"visibility"),Q(n,"visibility",ae.Visible),C(n,"classes"),C(n,"style"),C(n,"display"),C(n,"mark"),C(n,"cost"),C(n,"resource"),n[be]=function(){const{display:a,visibility:r,style:i,classes:l,resource:o,cost:u,canPurchase:d,bought:_,mark:b,id:p,purchase:y}=this;return{display:a,visibility:r,style:s(i),classes:l,resource:o,cost:u,canPurchase:d,bought:_,mark:b,id:p,purchase:y}},n})}const Xt="m",Ut=wt(Xt,()=>{const e="Matter",t="#336BDC";function n(O){let ye=O.amount.value;return ye=c.sub(ye,On.value),ye}const a=k(()=>c.div(q.amount.value,10)),r=Ke(()=>({resource:se,cost:700,display:{title:"Sine Foundation",description:"Increase Foundation's effect by 0.1 per Sine bought"}})),i=Ke(()=>({resource:se,cost:5e3,display:{title:"Sine Boost",description:"Multiply Sine's minimum by 1.5 and maximum by 2, per upgrade purchased"}})),l=Ke(()=>({resource:se,cost:4e4,display:{title:"Logarithm Unlock",description:"Unlock Logarithm, which increases Foundation's effect based on matter"}})),o=Ke(()=>({resource:se,cost:6e5,display:{title:"Logarithm Foundation",description:"Increase Logarithm's exponent by 0.01 per Foundation bought"}})),u=Ke(()=>({resource:se,cost:15e6,display:{title:"Cosine Unlock",description:"Unlock Cosine, which decreases buyable levels for cost purposes"}})),d={foundationSine:r,sineBoost:i,logarithmUnlock:l,logarithmFoundation:o,cosineUnlockUpgrade:u},_=k(()=>Object.values(d).filter(O=>O.bought.value).length),b=k(()=>{let O=new c(1);return O=O.add(c.mul(x.amount.value,N.value)),r.bought.value&&(O=O.add(a.value)),O}),p=ut(()=>({resource:se,cost(){let O=n(this);return c.pow(1.2,O)},display(){return{title:"Foundation",description:`Increases length by ${ee(b.value)}`}}})),y=k(()=>{let O=new c(1);return o.bought.value&&(O=O.add(c.div(p.amount.value,100))),O}),N=k(()=>c.div(c.pow(c.log10(c.max(10,se.value)),y.value),10)),x=ut(()=>({resource:se,cost(){let O=n(this);return c.mul(100,c.pow(1.4,O))},display(){return{title:"Logarithm",description:`Increases Foundation's effect by log<sub>10</sub>(matter)<sup>${ee(y.value)}</sup>/10<br>
                    Currently ${ee(N.value)}`}},visibility(){return l.bought.value?ae.Visible:ae.None}})),L=k(()=>{let O=new c(.1);return i.bought.value&&(O=O.mul(c.pow(1.5,_.value))),O}),Me=k(()=>{let O=new c(1);return i.bought.value&&(O=O.mul(c.pow(2,_.value))),O}),M=k(()=>(Math.sin(S.time*Math.PI/180/120)+1)/2),$=k(()=>{const O=c.log10(L.value),ye=c.log10(Me.value).minus(O);return c.dTen.pow(O.plus(ye.mul(M.value)))}),q=ut(()=>({resource:se,cost(){let O=n(this);return c.mul(10,c.pow(1.25,O))},display(){return{title:"Sine",description:`Increases width by between ${ee(L.value)} to ${ee(Me.value)}<br>
                    Currently ${ee($.value)}`}}})),he=k(()=>(Math.cos(S.time*Math.PI/180/120)+1)/2),Se=k(()=>c.mul(c.sub(1,he.value),.5)),On=k(()=>c.mul(kt.amount.value,Se.value)),kt=ut(()=>({resource:se,cost(){let O=n(this);return c.mul(1e3,c.pow(1.5,O))},display(){return{title:"Cosine",description:`Decreases buyable count for cost purposes of all matter buyables, by up to 0.5<br>
                    Currently ${ee(Se.value)}`}},visibility(){return u.bought.value?ae.Visible:ae.None}})),En={foundation:p,logarithm:x,sine:q,cosine:kt},se=Lt(k(()=>{let O=new c(1);O=O.add(c.mul(p.amount.value,b.value)),O=O.add(c.mul(x.amount.value,N.value));let ye=new c(1);return ye=ye.add(c.mul($.value,q.amount.value)),O.mul(ye)}),"matter"),Vn=Mn(()=>({thingsToReset:()=>[Ut]})),zt=Tn(()=>({layerID:Xt,color:t,reset:Vn}));return $n(zt,{display:kn(se),pinnable:!0}),{name:e,color:t,points:se,display:X(()=>g(Z,null,[g(Sn,{resource:se,color:t},null),$t(p,x),$t(q,kt),$t(r,i,l,o,u)])),treeNode:zt,upgradeData:d,buyableData:En}}),vt=wt("main",()=>{const e=Lt(0),t=bo(e),n=yo(e),a=k(()=>c.dZero);oe.on("update",l=>{e.value=c.add(e.value,c.times(a.value,l))});const r=wo(e,a),i=qo(()=>({nodes:[[Ut.treeNode]],branches:[],onReset(){e.value=Gt(this.resettingNode.value)===Gt(In.treeNode)?0:10,t.value=e.value,n.value=e.value},resetPropagation:Uo}));return{name:"Tree",links:i.links,display:X(()=>g(Z,null,[S.devSpeed===0?g("div",null,[E("Game Paused")]):null,S.devSpeed&&S.devSpeed!==1?g("div",null,[E("Dev Speed: "),ee(S.devSpeed),E("x")]):null,S.offlineTime?g("div",null,[E("Offline Time: "),yt(S.offlineTime)]):null,g("div",null,[c.lt(e.value,"1e1000")?g("span",null,[E("You have ")]):null,g("h2",null,[ee(e.value)]),c.lt(e.value,"1e1e6")?g("span",null,[E(" points")]):null]),c.gt(a.value,0)?g("div",null,[E("("),r.value,E(")")]):null,g(vo,null,null),Ye(i)])),points:e,best:t,total:n,oomps:r,tree:i}}),cs=e=>[vt,Ut],Pn=k(()=>!1);function fs(e,t){}var Fn=Object.freeze(Object.defineProperty({__proto__:null,main:vt,getInitialLayers:cs,hasWon:Pn,fixOldSave:fs},Symbol.toStringTag,{value:"Module"}));const ot=e=>(Oe("data-v-4a50ce42"),e=e(),Ee(),e),ms={class:"game-over-modal-header"},ps=["src","alt"],gs={class:"game-over-modal-title"},hs=ot(()=>m("h2",null,"Congratulations!",-1)),vs={key:0},bs=ot(()=>m("br",null,null,-1)),ys=ot(()=>m("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),_s=ot(()=>m("br",null,null,-1)),xs=["href"],ws=ot(()=>m("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),Ns=A({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:a,discordLink:r,versionNumber:i,versionTitle:l}=U,o=k(()=>yt(S.timePlayed)),u=k(()=>Pn.value&&!S.keepGoing),d=Fe(S,"autosave");function _(){S.keepGoing=!0}function b(){Ae(Ge())}return(p,y)=>(h(),R(Be,{"model-value":s(u)},{header:F(()=>[m("div",ms,[s(n)?(h(),w("img",{key:0,class:"game-over-modal-logo",src:s(n),alt:s(t)},null,8,ps)):I("",!0),m("div",gs,[hs,m("h4",null,"You've beaten "+B(s(t))+" v"+B(s(i))+": "+B(s(l)),1)])])]),body:F(({shown:N})=>[N?(h(),w("div",vs,[m("div",null,"It took you "+B(s(o))+" to beat the game.",1),bs,ys,_s,m("div",null,[m("a",{href:s(r),class:"game-over-modal-discord-link"},[ws,E(" "+B(s(a)),1)],8,xs)]),g(Ce,{title:"Autosave",modelValue:s(d),"onUpdate:modelValue":y[0]||(y[0]=x=>J(d)?d.value=x:null)},null,8,["modelValue"])])):I("",!0)]),footer:F(()=>[m("div",{class:"game-over-footer"},[m("button",{onClick:_,class:"button"},"Keep Going"),m("button",{onClick:b,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var ks=z(Ns,[["__scopeId","data-v-4a50ce42"]]);const Nt=e=>(Oe("data-v-3de07c06"),e=e(),Ee(),e),Ms=Nt(()=>m("div",{class:"nan-modal-header"},[m("h2",null,"NaN value detected!")],-1)),Ss={key:0},$s=Nt(()=>m("br",null,null,-1)),Cs=["href"],Ts=Nt(()=>m("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Is=Nt(()=>m("br",null,null,-1)),Ps={class:"nan-footer"},Fs=A({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=U,a=Fe(S,"autosave"),r=Fe(j,"hasNaN"),i=T(null),l=k(()=>{var y;return(y=j.NaNPath)==null?void 0:y.join(".")}),o=k(()=>{var y;return(y=j.NaNPath)==null?void 0:y.slice(-1)[0]}),u=k(()=>j.NaNReceiver&&o.value?j.NaNReceiver[o.value]:null),d=k({get(){return S.devSpeed===0},set(y){S.devSpeed=y?null:0}});function _(){j.NaNReceiver&&o.value&&(j.NaNReceiver[o.value]=new c(0),j.hasNaN=!1)}function b(){j.NaNReceiver&&o.value&&(j.NaNReceiver[o.value]=new c(1),j.hasNaN=!1)}function p(){j.NaNReceiver&&o.value&&(j.NaNReceiver[o.value]=new c(NaN),j.hasNaN=!1)}return(y,N)=>(h(),w(Z,null,[g(Be,Le({modelValue:s(r),"onUpdate:modelValue":N[4]||(N[4]=x=>J(r)?r.value=x:null)},y.$attrs),{header:F(()=>[Ms]),body:F(()=>[m("div",null,[E(' Attempted to assign "'+B(s(l))+'" to NaN',1),s(u)?(h(),w("span",Ss,B(" ")+"(previously "+B(s(ee)(s(u)))+")",1)):I("",!0),E(". Auto-saving has been "+B(s(a)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),$s,m("div",null,[m("a",{href:s(n),class:"nan-modal-discord-link"},[Ts,E(" "+B(s(t)),1)],8,Cs)]),Is,g(Ce,{title:"Autosave",modelValue:s(a),"onUpdate:modelValue":N[0]||(N[0]=x=>J(a)?a.value=x:null)},null,8,["modelValue"]),s(U).enablePausing?(h(),R(Ce,{key:0,title:"Pause game",modelValue:s(d),"onUpdate:modelValue":N[1]||(N[1]=x=>J(d)?d.value=x:null)},null,8,["modelValue"])):I("",!0)]),footer:F(()=>[m("div",Ps,[m("button",{onClick:N[2]||(N[2]=x=>{var L;return(L=i.value)==null?void 0:L.open()}),class:"button"},"Open Saves Manager"),m("button",{onClick:_,class:"button"},"Set to 0"),m("button",{onClick:b,class:"button"},"Set to 1"),s(u)&&s(c).neq(s(u),0)&&s(c).neq(s(u),1)?(h(),w("button",{key:0,onClick:N[3]||(N[3]=x=>r.value=!1),class:"button"}," Set to previous ")):I("",!0),m("button",{onClick:p,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),g(wn,{ref_key:"savesManager",ref:i},null,512)],64))}});var Os=z(Fs,[["__scopeId","data-v-3de07c06"]]);const Es={key:0,class:"tpsDisplay"},Vs={key:0,class:"low"},Ds=A({__name:"TPS",setup(e){const t=k(()=>c.div(j.lastTenTicks.length,j.lastTenTicks.reduce((i,l)=>i+l,0))),n=T([]);Ie(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const a=k(()=>n.value.reduce((i,l)=>c.max(i,l),0)),r=k(()=>c.sub(t.value,a.value).gt(1));return(i,l)=>s(t).isNan()?I("",!0):(h(),w("div",Es,[E(" TPS: "+B(s(we)(s(t)))+" ",1),g(Ft,{name:"fade"},{default:F(()=>[s(r)?(h(),w("span",Vs,B(s(we)(s(a))),1)):I("",!0)]),_:1})]))}});var Rs=z(Ds,[["__scopeId","data-v-46a3ed5b"]]);var As=A({__name:"App",setup(e){const t=U.useHeader,n=k(()=>_t[K.theme].variables),a=Fe(K,"showTPS"),r=k(()=>G(X(()=>g(Z,null,[er.map(Ye)]))));return(i,l)=>(h(),w(Z,null,[m("div",{id:"modal-root",style:ue(s(n))},null,4),m("div",{class:re(["app",{useHeader:s(t)}]),style:ue(s(n))},[s(t)?(h(),R(Nn,{key:0})):I("",!0),g(ho),s(s(a))?(h(),R(Rs,{key:1})):I("",!0),g(ks),g(Os),(h(),R(te(s(r))))],6)],64))}});var Ls=z(As,[["__scopeId","data-v-9417972e"]]);oe.on("setupVue",e=>e.use(Yn));function Bs(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:a,onRegistered:r,onRegisterError:i}=e;let l,o;const u=async(d=!0)=>{d&&(l==null||l.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()})),o&&o.waiting&&await Jn(o.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){l=new Kn("./sw.js",{scope:"./",type:"classic"}),l.addEventListener("activated",d=>{d.isUpdate||a==null||a()});{const d=()=>{n==null||n()};l.addEventListener("waiting",d),l.addEventListener("externalwaiting",d)}l.register({immediate:t}).then(d=>{o=d,r==null||r(d)}).catch(d=>{i==null||i(d)})}return u}function qs(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:a,onRegistered:r,onRegisterError:i}=e,l=T(!1),o=T(!1);return{updateServiceWorker:Bs({immediate:t,onNeedRefresh(){l.value=!0,n==null||n()},onOfflineReady(){o.value=!0,a==null||a()},onRegistered:r,onRegisterError:i}),offlineReady:o,needRefresh:l}}document.title=U.title;window.projInfo=U;if(U.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Za();const{globalBus:e,startGameLoop:t}=await mt(()=>Promise.resolve().then(function(){return Ya}),void 0),n=window.vue=zn(Ls);e.emit("setupVue",n),n.mount("#app"),Ne(()=>{const a=Zn(),{updateServiceWorker:r}=qs({onNeedRefresh(){a.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){r()}})},onOfflineReady(){a.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(i){i&&setInterval(i.update,60*60*1e3)}})}),t()});
